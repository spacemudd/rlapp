import{d as L,r as $,w as M,J as y,a as c,b as i,e as l,u as a,g as H,f as o,h as s,k as u,S as _,i as d,l as I,v as R,F as h,m as D,n as m,t as n,p as x}from"./app-B4CXrxA6.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-j6gg2DV2.js";import{_ as A,a as E}from"./CardContent.vue_vue_type_script_setup_true_lang-m18NTIW-.js";import{_ as G,a as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-D4-SZOu1.js";import{_ as b}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-STRE1Pnw.js";import{_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-DDdmzXzU.js";import{_ as q}from"./Badge.vue_vue_type_script_setup_true_lang-lG3NEwnp.js";import{_ as K,a as O,b as X,c as f,R as Z,F as Q}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DjycHvFz.js";import{P as T}from"./plus-CV8EWWeN.js";import{S as W}from"./search-Carplw_e.js";import{E as ee}from"./ellipsis-vertical-BJg7LDyT.js";import{E as te}from"./eye-D8loadUE.js";import{S as se}from"./square-pen-XAvm42ww.js";import{P as ae,C as re}from"./play-302JywDa.js";import{C as le}from"./circle-check-big-C2Lj9Ip9.js";import{T as oe}from"./trash-2-w8SOKkJu.js";import"./useForwardExpose-e-VyqxC-.js";import"./RovingFocusGroup-Bp_bgarQ.js";const ie={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ne={class:"space-y-6"},de={class:"flex items-center justify-between"},ue={class:"flex flex-col sm:flex-row gap-4"},ce={class:"flex-1"},me={class:"relative"},fe={class:"w-full sm:w-48"},_e={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 relative"},pe={class:"flex items-start justify-between"},ve={class:"space-y-1"},ye={class:"text-sm font-medium text-gray-900"},ge={class:"text-sm text-gray-500"},he={class:"text-sm font-medium text-gray-900"},xe={class:"text-sm text-gray-500"},be={class:"grid grid-cols-2 gap-4 text-sm"},we={class:"font-medium"},Ce={class:"font-medium"},ke={class:"pt-3 border-t"},Se={class:"flex justify-between items-center"},$e={class:"font-semibold text-lg"},De={class:"flex justify-between items-center mt-1"},Ae={class:"text-xs text-gray-400"},Ee={key:0,class:"text-xs text-green-600"},Te={key:0,class:"text-center py-12"},Ve={key:1,class:"flex justify-center"},Ne={class:"flex items-center space-x-2"},Pe=["innerHTML"],Qe=L({__name:"Index",props:{contracts:{},filters:{}},setup(V){const w=V,p=$(w.filters.search||""),v=$(w.filters.status||"all"),N=r=>{switch(r){case"draft":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"active":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"void":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},C=(r,t="AED")=>{["USD","EUR","AED","GBP","JPY","CAD","AUD","CHF","CNY","SEK","NZD"].includes(t.toUpperCase())||(t="AED");try{return new Intl.NumberFormat("en-AE",{style:"currency",currency:t,minimumFractionDigits:2}).format(r)}catch{return`${t} ${r.toFixed(2)}`}},k=r=>new Date(r).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});let S;M([p,v],()=>{clearTimeout(S),S=setTimeout(()=>{const r=new URLSearchParams;p.value&&r.set("search",p.value),v.value!=="all"&&r.set("status",v.value),y.get(route("contracts.index"),Object.fromEntries(r),{preserveState:!0,preserveScroll:!0})},300)});const P=r=>{confirm(`Are you sure you want to delete contract ${r.contract_number}?`)&&y.delete(route("contracts.destroy",r.id),{preserveScroll:!0})},F=r=>{confirm(`Are you sure you want to activate contract ${r.contract_number}?`)&&y.patch(route("contracts.activate",r.id),{},{preserveScroll:!0})},U=r=>{confirm(`Are you sure you want to complete contract ${r.contract_number}?`)&&y.patch(route("contracts.complete",r.id),{},{preserveScroll:!0})},j=r=>{const t=prompt("Please provide a reason for voiding this contract:");t&&y.patch(route("contracts.void",r.id),{void_reason:t},{preserveScroll:!0})};function B(r){window.location.href=route("invoices.create",{contract_id:r.id})}return(r,t)=>(i(),c(h,null,[l(a(H),{title:"Contracts"}),l(z,null,{default:o(()=>[s("div",ie,[s("div",ne,[s("div",de,[t[3]||(t[3]=s("div",null,[s("h1",{class:"text-2xl font-semibold text-gray-900"},"Contracts"),s("p",{class:"text-gray-600 mt-1"},"Manage rental contracts and their lifecycle")],-1)),l(a(_),{href:r.route("contracts.create")},{default:o(()=>[l(a(b),null,{default:o(()=>[l(a(T),{class:"w-4 h-4 mr-2"}),t[2]||(t[2]=d(" New Contract "))]),_:1,__:[2]})]),_:1},8,["href"])]),l(a(A),null,{default:o(()=>[l(a(E),{class:"pt-6"},{default:o(()=>[s("div",ue,[s("div",ce,[s("div",me,[l(a(W),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),l(a(Y),{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),placeholder:"Search contracts, customers, or vehicles...",class:"pl-10"},null,8,["modelValue"])])]),s("div",fe,[I(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e),class:"flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50"},t[4]||(t[4]=[s("option",{value:"all"},"All Status",-1),s("option",{value:"draft"},"Draft",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"completed"},"Completed",-1),s("option",{value:"void"},"Void",-1)]),512),[[R,v.value]])])])]),_:1})]),_:1}),s("div",_e,[(i(!0),c(h,null,D(r.contracts.data,e=>(i(),m(a(A),{key:e.id,class:"hover:shadow-md transition-shadow"},{default:o(()=>[l(a(G),{class:"pb-3"},{default:o(()=>[s("div",pe,[s("div",ve,[l(a(_),{href:r.route("contracts.show",e.id),class:"hover:underline"},{default:o(()=>[l(a(J),{class:"text-lg"},{default:o(()=>[d(n(e.contract_number),1)]),_:2},1024)]),_:2},1032,["href"]),l(a(q),{class:x([N(e.status),"text-xs"])},{default:o(()=>[d(n(e.status.charAt(0).toUpperCase()+e.status.slice(1)),1)]),_:2},1032,["class"])]),l(a(K),null,{default:o(()=>[l(a(O),{"as-child":""},{default:o(()=>[l(a(b),{variant:"ghost",size:"sm"},{default:o(()=>[l(a(ee),{class:"w-4 h-4"})]),_:1})]),_:1}),l(a(X),{align:"end",class:"z-50"},{default:o(()=>[l(a(f),{"as-child":""},{default:o(()=>[l(a(_),{href:r.route("contracts.show",e.id)},{default:o(()=>[l(a(te),{class:"w-4 h-4 mr-2"}),t[5]||(t[5]=d(" View Details "))]),_:2,__:[5]},1032,["href"])]),_:2},1024),e.status==="draft"?(i(),m(a(f),{key:0,"as-child":""},{default:o(()=>[l(a(_),{href:r.route("contracts.edit",e.id)},{default:o(()=>[l(a(se),{class:"w-4 h-4 mr-2"}),t[6]||(t[6]=d(" Edit "))]),_:2,__:[6]},1032,["href"])]),_:2},1024)):u("",!0),e.status==="draft"?(i(),m(a(f),{key:1,onClick:g=>F(e)},{default:o(()=>[l(a(ae),{class:"w-4 h-4 mr-2"}),t[7]||(t[7]=d(" Activate "))]),_:2,__:[7]},1032,["onClick"])):u("",!0),e.status==="active"?(i(),m(a(f),{key:2,onClick:g=>U(e)},{default:o(()=>[l(a(le),{class:"w-4 h-4 mr-2"}),t[8]||(t[8]=d(" Complete "))]),_:2,__:[8]},1032,["onClick"])):u("",!0),["draft","active"].includes(e.status)?(i(),m(a(f),{key:3,onClick:g=>j(e)},{default:o(()=>[l(a(re),{class:"w-4 h-4 mr-2"}),t[9]||(t[9]=d(" Void "))]),_:2,__:[9]},1032,["onClick"])):u("",!0),!e.invoice_id&&e.status!=="void"?(i(),m(a(f),{key:4,onClick:()=>B(e)},{default:o(()=>[l(a(Z),{class:"w-4 h-4 mr-2"}),t[10]||(t[10]=d(" Create Invoice "))]),_:2,__:[10]},1032,["onClick"])):u("",!0),e.status==="draft"?(i(),m(a(f),{key:5,onClick:g=>P(e),class:"text-red-600"},{default:o(()=>[l(a(oe),{class:"w-4 h-4 mr-2"}),t[11]||(t[11]=d(" Delete "))]),_:2,__:[11]},1032,["onClick"])):u("",!0)]),_:2},1024)]),_:2},1024)])]),_:2},1024),l(a(E),{class:"space-y-4"},{default:o(()=>[s("div",null,[s("p",ye,n(e.customer.first_name)+" "+n(e.customer.last_name),1),s("p",ge,n(e.customer.email),1)]),s("div",null,[s("p",he,n(e.vehicle.year)+" "+n(e.vehicle.make)+" "+n(e.vehicle.model),1),s("p",xe,n(e.vehicle.plate_number),1)]),s("div",be,[s("div",null,[t[12]||(t[12]=s("p",{class:"text-gray-500"},"Start Date",-1)),s("p",we,n(k(e.start_date)),1)]),s("div",null,[t[13]||(t[13]=s("p",{class:"text-gray-500"},"End Date",-1)),s("p",Ce,n(k(e.end_date)),1)])]),s("div",ke,[s("div",Se,[t[14]||(t[14]=s("span",{class:"text-sm text-gray-500"},"Total Amount",-1)),s("span",$e,n(C(e.total_amount,e.currency)),1)]),s("div",De,[s("span",Ae,n(e.total_days)+" days Ã— "+n(C(e.daily_rate,e.currency)),1),e.invoice_id?(i(),c("span",Ee,"Invoice Created")):u("",!0)])])]),_:2},1024)]),_:2},1024))),128))]),r.contracts.data.length===0?(i(),c("div",Te,[l(a(Q),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t[16]||(t[16]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No contracts found",-1)),t[17]||(t[17]=s("p",{class:"text-gray-500 mb-6"},"Get started by creating your first rental contract.",-1)),l(a(_),{href:r.route("contracts.create")},{default:o(()=>[l(a(b),null,{default:o(()=>[l(a(T),{class:"w-4 h-4 mr-2"}),t[15]||(t[15]=d(" Create Contract "))]),_:1,__:[15]})]),_:1},8,["href"])])):u("",!0),r.contracts.links&&r.contracts.data.length>0?(i(),c("div",Ve,[s("nav",Ne,[(i(!0),c(h,null,D(r.contracts.links,e=>(i(),c(h,{key:e.label},[e.url?(i(),m(a(_),{key:0,href:e.url,class:x(["px-3 py-2 text-sm rounded-md",e.active?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"]),innerHTML:e.label},null,8,["href","class","innerHTML"])):(i(),c("span",{key:1,class:x(["px-3 py-2 text-sm rounded-md text-gray-400 cursor-not-allowed"]),innerHTML:e.label},null,8,Pe))],64))),128))])])):u("",!0)])])]),_:1})],64))}});export{Qe as default};
