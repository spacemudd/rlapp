import{d as H,x as k,r as J,a as y,o as d,b as o,u as t,g as X,e as r,f as s,m as u,j as c,S as V,h as l,t as n,n as E,F as $,l as A,i as Z}from"./app-D0GmyGZl.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-ClWf8rUl.js";import{_ as f,a as _,b as p,c as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-B8yC9NBI.js";import{_ as C}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-qW6pmEna.js";import{_ as j}from"./Badge.vue_vue_type_script_setup_true_lang-CzfjdgTs.js";import{_ as F,a as T,R as D,b as N,c as b,d as P,C as Q,F as U}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-D9xg78FF.js";import{_ as W,a as tt,b as st,c as et}from"./DialogTitle.vue_vue_type_script_setup_true_lang-ChTFYIdf.js";import{_ as at,a as ot}from"./DialogHeader.vue_vue_type_script_setup_true_lang-Dmhptadr.js";import{_ as rt}from"./Textarea.vue_vue_type_script_setup_true_lang-Co2iLILB.js";import{_ as nt}from"./Label.vue_vue_type_script_setup_true_lang-2Uh-HsNW.js";import{A as lt}from"./arrow-left-4hzjCcDC.js";import{S as it}from"./square-pen-ChGa8jSB.js";import{E as dt}from"./ellipsis-vertical-cOfzo-Ck.js";import{D as ct}from"./download-COMByB0l.js";import{P as ut,C as mt}from"./play-Bn1y4nmU.js";import{C as ft}from"./circle-check-big-BmcZ4bSb.js";import{T as _t}from"./trash-2-CGl8CMCI.js";import{U as pt}from"./user-CXqBrAHC.js";import{C as gt}from"./calendar-CrqvJDC4.js";import{D as vt}from"./dollar-sign-C4HAoaGR.js";import"./useForwardExpose-DFvrxNgW.js";import"./RovingFocusGroup-DXG8K-w5.js";const yt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},bt={class:"space-y-6"},wt={class:"space-y-4"},Ct={class:"flex items-center justify-between"},ht={class:"text-2xl font-semibold text-gray-900"},xt={class:"flex items-center gap-3 mt-1"},kt={class:"text-gray-500 text-sm"},Dt={class:"flex items-center gap-2"},$t={class:"flex flex-col"},St={class:"font-medium"},Vt={class:"text-sm text-gray-500"},Et={class:"grid gap-6 lg:grid-cols-2"},At={class:"font-semibold text-lg"},jt={class:"grid grid-cols-1 gap-2 mt-2 text-sm"},Ft={class:"flex justify-between"},Tt={class:"flex justify-between"},Nt={class:"flex justify-between"},Pt={class:"text-right"},Ut={class:"flex justify-between"},Bt={class:"flex justify-between"},It={class:"font-semibold text-lg"},Lt={class:"grid grid-cols-1 gap-2 mt-2 text-sm"},Rt={class:"flex justify-between"},Mt={class:"font-medium"},zt={class:"flex justify-between"},Gt={class:"flex justify-between"},Kt={class:"text-right"},qt={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-4"},Yt={class:"font-medium"},Ht={class:"font-medium"},Jt={class:"font-medium"},Xt={class:"font-medium"},Zt={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-4"},Ot={class:"font-medium"},Qt={class:"font-medium"},Wt={key:0},ts={class:"font-medium"},ss={key:1},es={class:"font-medium"},as={class:"mt-6 p-4 bg-green-50 border border-green-200 rounded-md"},os={class:"flex justify-between items-center"},rs={class:"text-2xl font-bold text-green-900"},ns={class:"text-sm text-green-700 mt-1"},ls={class:"grid gap-6 lg:grid-cols-2"},is={class:"text-sm whitespace-pre-wrap"},ds={class:"text-sm whitespace-pre-wrap"},cs={class:"space-y-3"},us=["onClick"],ms={class:"flex items-center gap-3"},fs={class:"font-medium"},_s={class:"text-sm text-gray-500"},ps={class:"text-right"},gs={class:"font-medium"},vs={class:"text-sm"},ys={class:"space-y-2"},bs={key:0,class:"text-sm text-red-600"},zs=H({__name:"Show",props:{contract:{}},setup(B){const w=B,m=k({void_reason:""}),h=J(!1),I=()=>{k({}).patch(route("contracts.activate",w.contract.id))},L=()=>{k({}).patch(route("contracts.complete",w.contract.id))},R=()=>{confirm("Are you sure you want to delete this contract? This action cannot be undone.")&&k({}).delete(route("contracts.destroy",w.contract.id))},M=()=>{m.patch(route("contracts.void",w.contract.id),{onSuccess:()=>{h.value=!1,m.reset()}})},z=()=>{window.open(route("contracts.pdf",w.contract.id),"_blank")},G=a=>{switch(a){case"draft":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"active":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"void":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},K=a=>{switch(a){case"paid":case"fully_paid":return"bg-green-100 text-green-800 border-green-200";case"partial_paid":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"unpaid":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=(a,e="AED")=>{["USD","EUR","AED","GBP","JPY","CAD","AUD","CHF","CNY","SEK","NZD"].includes(e.toUpperCase())||(e="AED");try{return new Intl.NumberFormat("en-AE",{style:"currency",currency:e,minimumFractionDigits:2}).format(a)}catch{return`${e} ${a.toFixed(2)}`}},x=a=>new Date(a).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),q=a=>new Date(a).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});function Y(){window.location.href=route("invoices.create",{contract_id:w.contract.id})}return(a,e)=>(d(),y($,null,[o(t(X),{title:`Contract ${a.contract.contract_number}`},null,8,["title"]),o(O,null,{default:r(()=>[s("div",yt,[s("div",bt,[s("div",wt,[s("div",null,[o(t(V),{href:a.route("contracts.index")},{default:r(()=>[o(t(C),{variant:"ghost",size:"sm"},{default:r(()=>[o(t(lt),{class:"w-4 h-4 mr-2"}),e[4]||(e[4]=l(" Back to Contracts "))]),_:1,__:[4]})]),_:1},8,["href"])]),s("div",Ct,[s("div",null,[s("h1",ht,n(a.contract.contract_number),1),s("div",xt,[o(t(j),{class:E([G(a.contract.status),"text-xs"])},{default:r(()=>[l(n(a.contract.status.charAt(0).toUpperCase()+a.contract.status.slice(1)),1)]),_:1},8,["class"]),s("span",kt,"Created by "+n(a.contract.created_by),1)])]),s("div",Dt,[a.contract.status==="draft"?(d(),u(t(V),{key:0,href:a.route("contracts.edit",a.contract.id)},{default:r(()=>[o(t(C),{variant:"outline"},{default:r(()=>[o(t(it),{class:"w-4 h-4 mr-2"}),e[5]||(e[5]=l(" Edit Contract "))]),_:1,__:[5]})]),_:1},8,["href"])):c("",!0),a.contract.invoices&&a.contract.invoices.length>0?(d(),u(t(F),{key:1},{default:r(()=>[o(t(T),{asChild:""},{default:r(()=>[o(t(C),{variant:"outline"},{default:r(()=>[o(t(D),{class:"w-4 h-4 mr-2"}),l(" View Invoices ("+n(a.contract.invoices.length)+") ",1)]),_:1})]),_:1}),o(t(N),{align:"end",class:"w-64"},{default:r(()=>[(d(!0),y($,null,A(a.contract.invoices,i=>(d(),u(t(b),{key:i.id,class:"cursor-pointer",onClick:S=>a.$inertia.visit(a.route("invoices.show",i.id))},{default:r(()=>[s("div",$t,[s("span",St,n(i.invoice_number),1),s("span",Vt,n(v(i.total_amount))+" - "+n(i.status),1)])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):c("",!0),o(t(F),null,{default:r(()=>[o(t(T),{asChild:""},{default:r(()=>[o(t(C),{variant:"outline",size:"sm"},{default:r(()=>[o(t(dt),{class:"w-4 h-4"})]),_:1})]),_:1}),o(t(N),{align:"end",class:"w-48"},{default:r(()=>[o(t(b),{onClick:z,class:"cursor-pointer"},{default:r(()=>[o(t(ct),{class:"w-4 h-4 mr-2"}),e[6]||(e[6]=l(" Download PDF "))]),_:1,__:[6]}),o(t(P)),a.contract.status==="draft"?(d(),u(t(b),{key:0,onClick:I,class:"cursor-pointer"},{default:r(()=>[o(t(ut),{class:"w-4 h-4 mr-2"}),e[7]||(e[7]=l(" Activate Contract "))]),_:1,__:[7]})):c("",!0),a.contract.status==="active"?(d(),u(t(b),{key:1,onClick:L,class:"cursor-pointer"},{default:r(()=>[o(t(ft),{class:"w-4 h-4 mr-2"}),e[8]||(e[8]=l(" Complete Contract "))]),_:1,__:[8]})):c("",!0),a.contract.status!=="void"?(d(),u(t(b),{key:2,onClick:Y,class:"cursor-pointer"},{default:r(()=>[o(t(D),{class:"w-4 h-4 mr-2"}),e[9]||(e[9]=l(" Create Invoice "))]),_:1,__:[9]})):c("",!0),a.contract.status!=="completed"&&a.contract.status!=="void"?(d(),u(t(P),{key:3})):c("",!0),a.contract.status!=="completed"&&a.contract.status!=="void"?(d(),u(t(b),{key:4,onClick:e[0]||(e[0]=i=>h.value=!0),class:"cursor-pointer text-red-600 focus:text-red-600"},{default:r(()=>[o(t(mt),{class:"w-4 h-4 mr-2"}),e[10]||(e[10]=l(" Void Contract "))]),_:1,__:[10]})):c("",!0),a.contract.status==="draft"?(d(),u(t(b),{key:5,onClick:R,class:"cursor-pointer text-red-600 focus:text-red-600"},{default:r(()=>[o(t(_t),{class:"w-4 h-4 mr-2"}),e[11]||(e[11]=l(" Delete Contract "))]),_:1,__:[11]})):c("",!0)]),_:1})]),_:1})])])]),s("div",Et,[o(t(f),null,{default:r(()=>[o(t(_),null,{default:r(()=>[o(t(p),{class:"flex items-center gap-2"},{default:r(()=>[o(t(pt),{class:"w-5 h-5"}),e[12]||(e[12]=l(" Customer Information "))]),_:1,__:[12]})]),_:1}),o(t(g),{class:"space-y-4"},{default:r(()=>[s("div",null,[s("h3",At,n(a.contract.customer.first_name)+" "+n(a.contract.customer.last_name),1),s("div",jt,[s("div",Ft,[e[13]||(e[13]=s("span",{class:"text-gray-500"},"Email:",-1)),s("span",null,n(a.contract.customer.email),1)]),s("div",Tt,[e[14]||(e[14]=s("span",{class:"text-gray-500"},"Phone:",-1)),s("span",null,n(a.contract.customer.phone),1)]),s("div",Nt,[e[15]||(e[15]=s("span",{class:"text-gray-500"},"Address:",-1)),s("span",Pt,n(a.contract.customer.address)+", "+n(a.contract.customer.city)+", "+n(a.contract.customer.country),1)]),s("div",Ut,[e[16]||(e[16]=s("span",{class:"text-gray-500"},"License:",-1)),s("span",null,n(a.contract.customer.drivers_license_number),1)]),s("div",Bt,[e[17]||(e[17]=s("span",{class:"text-gray-500"},"License Expiry:",-1)),s("span",null,n(x(a.contract.customer.drivers_license_expiry)),1)])])])]),_:1})]),_:1}),o(t(f),null,{default:r(()=>[o(t(_),null,{default:r(()=>[o(t(p),{class:"flex items-center gap-2"},{default:r(()=>[o(t(Q),{class:"w-5 h-5"}),e[18]||(e[18]=l(" Vehicle Information "))]),_:1,__:[18]})]),_:1}),o(t(g),{class:"space-y-4"},{default:r(()=>[s("div",null,[s("h3",It,n(a.contract.vehicle.year)+" "+n(a.contract.vehicle.make)+" "+n(a.contract.vehicle.model),1),s("div",Lt,[s("div",Rt,[e[19]||(e[19]=s("span",{class:"text-gray-500"},"Plate Number:",-1)),s("span",Mt,n(a.contract.vehicle.plate_number),1)]),s("div",zt,[e[20]||(e[20]=s("span",{class:"text-gray-500"},"Color:",-1)),s("span",null,n(a.contract.vehicle.color),1)]),s("div",Gt,[e[21]||(e[21]=s("span",{class:"text-gray-500"},"Chassis Number:",-1)),s("span",Kt,n(a.contract.vehicle.chassis_number),1)])])])]),_:1})]),_:1})]),o(t(f),null,{default:r(()=>[o(t(_),null,{default:r(()=>[o(t(p),{class:"flex items-center gap-2"},{default:r(()=>[o(t(gt),{class:"w-5 h-5"}),e[22]||(e[22]=l(" Contract Details "))]),_:1,__:[22]})]),_:1}),o(t(g),null,{default:r(()=>[s("div",qt,[s("div",null,[e[23]||(e[23]=s("span",{class:"text-sm text-gray-500"},"Start Date",-1)),s("p",Yt,n(x(a.contract.start_date)),1)]),s("div",null,[e[24]||(e[24]=s("span",{class:"text-sm text-gray-500"},"End Date",-1)),s("p",Ht,n(x(a.contract.end_date)),1)]),s("div",null,[e[25]||(e[25]=s("span",{class:"text-sm text-gray-500"},"Total Days",-1)),s("p",Jt,n(a.contract.total_days)+" days",1)]),s("div",null,[e[26]||(e[26]=s("span",{class:"text-sm text-gray-500"},"Created",-1)),s("p",Xt,n(q(a.contract.created_at)),1)])])]),_:1})]),_:1}),o(t(f),null,{default:r(()=>[o(t(_),null,{default:r(()=>[o(t(p),{class:"flex items-center gap-2"},{default:r(()=>[o(t(vt),{class:"w-5 h-5"}),e[27]||(e[27]=l(" Financial Details "))]),_:1,__:[27]})]),_:1}),o(t(g),null,{default:r(()=>[s("div",Zt,[s("div",null,[e[28]||(e[28]=s("span",{class:"text-sm text-gray-500"},"Daily Rate",-1)),s("p",Ot,n(v(a.contract.daily_rate,a.contract.currency)),1)]),s("div",null,[e[29]||(e[29]=s("span",{class:"text-sm text-gray-500"},"Security Deposit",-1)),s("p",Qt,n(v(a.contract.deposit_amount,a.contract.currency)),1)]),a.contract.mileage_limit?(d(),y("div",Wt,[e[30]||(e[30]=s("span",{class:"text-sm text-gray-500"},"Mileage Limit",-1)),s("p",ts,n(a.contract.mileage_limit.toLocaleString())+" KM",1)])):c("",!0),a.contract.excess_mileage_rate?(d(),y("div",ss,[e[31]||(e[31]=s("span",{class:"text-sm text-gray-500"},"Excess Mileage Rate",-1)),s("p",es,n(v(a.contract.excess_mileage_rate,a.contract.currency))+"/KM",1)])):c("",!0)]),s("div",as,[s("div",os,[e[32]||(e[32]=s("span",{class:"text-green-800 font-medium"},"Total Contract Amount:",-1)),s("span",rs,n(v(a.contract.total_amount,a.contract.currency)),1)]),s("p",ns,n(a.contract.total_days)+" days × "+n(v(a.contract.daily_rate,a.contract.currency)),1)])]),_:1})]),_:1}),s("div",ls,[a.contract.terms_and_conditions?(d(),u(t(f),{key:0},{default:r(()=>[o(t(_),null,{default:r(()=>[o(t(p),{class:"flex items-center gap-2"},{default:r(()=>[o(t(U),{class:"w-5 h-5"}),e[33]||(e[33]=l(" Terms and Conditions "))]),_:1,__:[33]})]),_:1}),o(t(g),null,{default:r(()=>[s("p",is,n(a.contract.terms_and_conditions),1)]),_:1})]),_:1})):c("",!0),a.contract.notes?(d(),u(t(f),{key:1},{default:r(()=>[o(t(_),null,{default:r(()=>[o(t(p),{class:"flex items-center gap-2"},{default:r(()=>[o(t(U),{class:"w-5 h-5"}),e[34]||(e[34]=l(" Internal Notes "))]),_:1,__:[34]})]),_:1}),o(t(g),null,{default:r(()=>[s("p",ds,n(a.contract.notes),1)]),_:1})]),_:1})):c("",!0)]),a.contract.invoices&&a.contract.invoices.length>0?(d(),u(t(f),{key:0},{default:r(()=>[o(t(_),null,{default:r(()=>[o(t(p),{class:"flex items-center gap-2"},{default:r(()=>[o(t(D),{class:"w-5 h-5"}),l(" Associated Invoices ("+n(a.contract.invoices.length)+") ",1)]),_:1})]),_:1}),o(t(g),null,{default:r(()=>[s("div",cs,[(d(!0),y($,null,A(a.contract.invoices,i=>(d(),y("div",{key:i.id,class:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:S=>a.$inertia.visit(a.route("invoices.show",i.id))},[s("div",ms,[o(t(D),{class:"w-4 h-4 text-gray-500"}),s("div",null,[s("p",fs,n(i.invoice_number),1),s("p",_s,n(x(i.invoice_date)),1)])]),s("div",ps,[s("p",gs,n(v(i.total_amount)),1),o(t(j),{class:E([K(i.status),"text-xs"])},{default:r(()=>[l(n(i.status.replace("_"," ").toUpperCase()),1)]),_:2},1032,["class"])])],8,us))),128))])]),_:1})]),_:1})):c("",!0),a.contract.status==="void"&&a.contract.void_reason?(d(),u(t(f),{key:1},{default:r(()=>[o(t(_),null,{default:r(()=>[o(t(p),{class:"text-red-600"},{default:r(()=>e[35]||(e[35]=[l("Void Reason")])),_:1,__:[35]})]),_:1}),o(t(g),null,{default:r(()=>[s("p",vs,n(a.contract.void_reason),1)]),_:1})]),_:1})):c("",!0)])]),o(t(W),{open:h.value,"onUpdate:open":e[3]||(e[3]=i=>h.value=i)},{default:r(()=>[o(t(tt),{class:"sm:max-w-md"},{default:r(()=>[o(t(at),null,{default:r(()=>[o(t(st),null,{default:r(()=>e[36]||(e[36]=[l("Void Contract")])),_:1,__:[36]}),o(t(et),null,{default:r(()=>e[37]||(e[37]=[l(" Please provide a reason for voiding this contract. This action cannot be undone. ")])),_:1,__:[37]})]),_:1}),s("form",{onSubmit:Z(M,["prevent"]),class:"space-y-4"},[s("div",ys,[o(t(nt),{for:"void_reason"},{default:r(()=>e[38]||(e[38]=[l("Void Reason *")])),_:1,__:[38]}),o(t(rt),{id:"void_reason",modelValue:t(m).void_reason,"onUpdate:modelValue":e[1]||(e[1]=i=>t(m).void_reason=i),placeholder:"Enter the reason for voiding this contract...",required:"",rows:"4"},null,8,["modelValue"]),t(m).errors.void_reason?(d(),y("div",bs,n(t(m).errors.void_reason),1)):c("",!0)]),o(t(ot),null,{default:r(()=>[o(t(C),{type:"button",variant:"outline",onClick:e[2]||(e[2]=i=>h.value=!1)},{default:r(()=>e[39]||(e[39]=[l(" Cancel ")])),_:1,__:[39]}),o(t(C),{type:"submit",variant:"destructive",disabled:t(m).processing},{default:r(()=>[l(n(t(m).processing?"Voiding...":"Void Contract"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{zs as default};
