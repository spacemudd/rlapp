import{d as K,r as S,w as O,a as f,o as m,b as s,u as e,g as W,e as r,f as t,m as g,j as h,h as i,t as l,F as N,l as P,n as U,S as A,x as X,J as D}from"./app-dzhYHfQ6.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-FNdA422i.js";import{_ as v,a as y,b,c as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-b-trmVe4.js";import{_ as Z}from"./CardDescription.vue_vue_type_script_setup_true_lang-BHp0wru-.js";import{c as L,_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DdsWb3Js.js";import{_ as ee}from"./Input.vue_vue_type_script_setup_true_lang-B5pWYQo0.js";import{_ as te,a as se,b as oe,c as re}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BJiuQUbd.js";import{_ as ae}from"./DialogHeader.vue_vue_type_script_setup_true_lang-CwzYDj4m.js";import{_ as le}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BNbh0fbp.js";import{_ as ne}from"./CreateCustomerForm.vue_vue_type_script_setup_true_lang-BZ2UkvnW.js";import{S as z}from"./search-Cn7TfMx7.js";import{P as I}from"./plus-Bh08mIoj.js";import{U as C}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-BXa7DggV.js";import{M as de}from"./mail-Ba4LD-nA.js";import{C as ue}from"./calendar-DjaopmDs.js";import{S as ie}from"./square-pen-RcGLJuQg.js";import{T as me}from"./trash-2-BOVyrKP7.js";import"./useForwardExpose-CSgtMcpZ.js";import"./RovingFocusGroup-DiTamV0A.js";import"./Label.vue_vue_type_script_setup_true_lang-CrNC81gh.js";import"./Textarea.vue_vue_type_script_setup_true_lang-Dcsq_i-R.js";import"./InputError.vue_vue_type_script_setup_true_lang-B_0wGZMY.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=L("CreditCardIcon",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=L("PhoneIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),_e={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},pe={class:"space-y-6"},xe={class:"flex items-center justify-between"},ge={class:"flex items-center gap-4"},he={class:"relative"},ve={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},ye={class:"text-2xl font-bold"},be={class:"text-xs text-muted-foreground"},we={class:"text-2xl font-bold"},Ce={class:"text-2xl font-bold"},$e={key:0,class:"flex items-center justify-center py-12"},ke={class:"text-center"},Se={class:"mt-4 text-lg font-semibold"},Ne={class:"mt-2 text-sm text-muted-foreground"},Ae={class:"mt-4 flex gap-2 justify-center"},je={key:1,class:"space-y-4"},Te={key:0,class:"flex items-center justify-between p-3 bg-muted/50 rounded-md"},Pe={class:"flex items-center gap-2"},Ue={class:"text-sm text-muted-foreground"},De={class:"rounded-md border"},ze={class:"w-full"},Ie={class:"p-4 align-middle"},Le={class:"font-medium"},Me={class:"text-sm text-muted-foreground"},Ve={class:"text-xs text-muted-foreground"},Ee={class:"p-4 align-middle"},Be={class:"flex items-center gap-2 text-sm"},Re={class:"flex items-center gap-2 text-sm text-muted-foreground"},qe={class:"p-4 align-middle"},Fe={class:"flex items-center gap-2 text-sm"},Je={class:"flex items-center gap-2 text-sm text-muted-foreground"},Ge={class:"p-4 align-middle"},Qe={class:"p-4 align-middle"},He={class:"flex items-center gap-2"},Ke={key:1,class:"flex items-center justify-between mt-6"},Oe={class:"text-sm text-muted-foreground"},We={class:"flex items-center gap-2"},Xe={key:1,class:"px-3 py-2 text-sm border rounded-md text-muted-foreground cursor-not-allowed bg-muted/50"},Ye={key:3,class:"px-3 py-2 text-sm border rounded-md text-muted-foreground cursor-not-allowed bg-muted/50"},bt=K({__name:"Customers",props:{customers:{},stats:{},search:{}},setup(M){const n=M,V=[{title:"Dashboard",href:"/dashboard"},{title:"Customers",href:"/customers"}],_=S(!1),c=S(null),u=S(n.search||""),j=()=>{c.value=null,_.value=!0},E=d=>{c.value=d,_.value=!0},B=d=>{c.value?d.put(`/customers/${c.value.id}`,{onSuccess:()=>{_.value=!1,c.value=null}}):d.post("/customers",{onSuccess:()=>{_.value=!1,c.value=null}})},R=()=>{_.value=!1,c.value=null},q=d=>{confirm("Are you sure you want to delete this customer?")&&X({}).delete(`/customers/${d.id}`)},F=d=>new Date(d).toLocaleDateString(),J=d=>`${d.first_name} ${d.last_name}`,G=()=>{const d=n.customers.current_page,o=n.customers.last_page,a=[];if(o<=10)for(let p=1;p<=o;p++)a.push(p);else{const p=Math.max(1,d-2),H=Math.min(o,d+2);for(let k=p;k<=H;k++)a.push(k)}return a},Q=()=>{const d=new URLSearchParams;u.value.trim()&&d.append("search",u.value.trim());const o=`/customers${d.toString()?"?"+d.toString():""}`;D.get(o,{},{preserveState:!0,preserveScroll:!1})},$=()=>{u.value="",D.get("/customers",{},{preserveState:!0,preserveScroll:!1})};let T;return O(u,(d,o)=>{d!==o&&(clearTimeout(T),T=setTimeout(()=>{Q()},500))}),(d,o)=>(m(),f(N,null,[s(e(W),{title:"Customers"}),s(Y,{breadcrumbs:V},{default:r(()=>[t("div",_e,[t("div",pe,[t("div",xe,[o[4]||(o[4]=t("div",null,[t("h1",{class:"text-3xl font-bold tracking-tight"},"Customers"),t("p",{class:"text-muted-foreground"}," Manage your customer database and relationships ")],-1)),t("div",ge,[t("div",he,[s(e(z),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s(e(ee),{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=a=>u.value=a),placeholder:"Search customers...",class:"pl-10 w-64"},null,8,["modelValue"]),u.value?(m(),g(e(x),{key:0,variant:"ghost",size:"sm",class:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0",onClick:$},{default:r(()=>o[2]||(o[2]=[i(" Ã— ")])),_:1,__:[2]})):h("",!0)]),s(e(te),{open:_.value,"onUpdate:open":o[1]||(o[1]=a=>_.value=a)},{default:r(()=>[s(e(le),{"as-child":""},{default:r(()=>[s(e(x),{onClick:j},{default:r(()=>[s(e(I),{class:"mr-2 h-4 w-4"}),o[3]||(o[3]=i(" Add Customer "))]),_:1,__:[3]})]),_:1}),s(e(se),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:r(()=>[s(e(ae),null,{default:r(()=>[s(e(oe),null,{default:r(()=>[i(l(c.value?"Edit Customer":"Add New Customer"),1)]),_:1}),s(e(re),null,{default:r(()=>[i(l(c.value?"Update customer information below.":"Enter customer information below. All fields marked with * are required."),1)]),_:1})]),_:1}),s(ne,{"editing-customer":c.value,onSubmit:B,onCancel:R},null,8,["editing-customer"])]),_:1})]),_:1},8,["open"])])]),t("div",ve,[s(e(v),null,{default:r(()=>[s(e(y),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(e(b),{class:"text-sm font-medium"},{default:r(()=>o[5]||(o[5]=[i("Total Customers")])),_:1,__:[5]}),s(e(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(w),null,{default:r(()=>[t("div",ye,l(n.stats.total),1),t("p",be,l(n.stats.total===0?"No customers added yet":"Total registered customers"),1)]),_:1})]),_:1}),s(e(v),null,{default:r(()=>[s(e(y),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(e(b),{class:"text-sm font-medium"},{default:r(()=>o[6]||(o[6]=[i("Active Customers")])),_:1,__:[6]}),s(e(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(w),null,{default:r(()=>[t("div",we,l(n.stats.active),1),o[7]||(o[7]=t("p",{class:"text-xs text-muted-foreground"}," Currently active ",-1))]),_:1,__:[7]})]),_:1}),s(e(v),null,{default:r(()=>[s(e(y),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(e(b),{class:"text-sm font-medium"},{default:r(()=>o[8]||(o[8]=[i("New This Month")])),_:1,__:[8]}),s(e(C),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(w),null,{default:r(()=>[t("div",Ce,l(n.stats.new_this_month),1),o[9]||(o[9]=t("p",{class:"text-xs text-muted-foreground"}," Added this month ",-1))]),_:1,__:[9]})]),_:1})]),s(e(v),null,{default:r(()=>[s(e(y),null,{default:r(()=>[s(e(b),null,{default:r(()=>o[10]||(o[10]=[i("Customer List")])),_:1,__:[10]}),s(e(Z),null,{default:r(()=>o[11]||(o[11]=[i(" A list of all your customers and their information. ")])),_:1,__:[11]})]),_:1}),s(e(w),null,{default:r(()=>[n.customers.data.length===0?(m(),f("div",$e,[t("div",ke,[s(e(C),{class:"mx-auto h-16 w-16 text-muted-foreground/50"}),t("h3",Se,l(u.value?"No customers found":"No customers yet"),1),t("p",Ne,l(u.value?`No customers match your search for "${u.value}". Try adjusting your search terms.`:"Get started by adding your first customer."),1),t("div",Ae,[u.value?(m(),g(e(x),{key:0,variant:"outline",onClick:$},{default:r(()=>o[12]||(o[12]=[i(" Clear Search ")])),_:1,__:[12]})):h("",!0),s(e(x),{onClick:j},{default:r(()=>[s(e(I),{class:"mr-2 h-4 w-4"}),o[13]||(o[13]=i(" Add Customer "))]),_:1,__:[13]})])])])):(m(),f("div",je,[u.value?(m(),f("div",Te,[t("div",Pe,[s(e(z),{class:"h-4 w-4 text-muted-foreground"}),t("span",Ue," Showing "+l(n.customers.total)+" result"+l(n.customers.total!==1?"s":"")+' for "'+l(u.value)+'" ',1)]),s(e(x),{variant:"ghost",size:"sm",onClick:$},{default:r(()=>o[14]||(o[14]=[i(" Clear Search ")])),_:1,__:[14]})])):h("",!0),t("div",De,[t("table",ze,[o[15]||(o[15]=t("thead",null,[t("tr",{class:"border-b bg-muted/50"},[t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Name"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Contact"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"License"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Status"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Actions")])],-1)),t("tbody",null,[(m(!0),f(N,null,P(n.customers.data,a=>(m(),f("tr",{key:a.id,class:"border-b transition-colors hover:bg-muted/50"},[t("td",Ie,[t("div",Le,l(J(a)),1),t("div",Me,l(a.country),1),t("div",Ve,l(a.nationality),1)]),t("td",Ee,[t("div",Be,[s(e(de),{class:"h-4 w-4"}),i(" "+l(a.email),1)]),t("div",Re,[s(e(fe),{class:"h-4 w-4"}),i(" "+l(a.phone),1)])]),t("td",qe,[t("div",Fe,[s(e(ce),{class:"h-4 w-4"}),i(" "+l(a.drivers_license_number),1)]),t("div",Je,[s(e(ue),{class:"h-4 w-4"}),i(" Expires: "+l(F(a.drivers_license_expiry)),1)])]),t("td",Ge,[t("span",{class:U(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{"bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20":a.status==="active","bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/20":a.status==="inactive"}])},l(a.status==="active"?"Active":"Inactive"),3)]),t("td",Qe,[t("div",He,[s(e(x),{size:"sm",variant:"ghost",onClick:p=>E(a)},{default:r(()=>[s(e(ie),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),s(e(x),{size:"sm",variant:"ghost",onClick:p=>q(a),class:"text-red-600 hover:text-red-700"},{default:r(()=>[s(e(me),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])])]),n.customers.last_page>1?(m(),f("div",Ke,[t("p",Oe," Showing "+l(n.customers.from??0)+" to "+l(n.customers.to??0)+" of "+l(n.customers.total)+" results ",1),t("div",We,[n.customers.current_page>1?(m(),g(e(A),{key:0,href:`/customers?page=${n.customers.current_page-1}${u.value?"&search="+encodeURIComponent(u.value):""}`,class:"px-3 py-2 text-sm border rounded-md transition-colors hover:bg-muted"},{default:r(()=>o[16]||(o[16]=[i(" Previous ")])),_:1,__:[16]},8,["href"])):(m(),f("span",Xe," Previous ")),(m(!0),f(N,null,P(G(),a=>(m(),g(e(A),{key:`page-${a}`,href:`/customers?page=${a}${u.value?"&search="+encodeURIComponent(u.value):""}`,class:U(["px-3 py-2 text-sm border rounded-md transition-colors",{"bg-primary text-primary-foreground border-primary":a===n.customers.current_page,"hover:bg-muted":a!==n.customers.current_page}])},{default:r(()=>[i(l(a),1)]),_:2},1032,["href","class"]))),128)),n.customers.current_page<n.customers.last_page?(m(),g(e(A),{key:2,href:`/customers?page=${n.customers.current_page+1}${u.value?"&search="+encodeURIComponent(u.value):""}`,class:"px-3 py-2 text-sm border rounded-md transition-colors hover:bg-muted"},{default:r(()=>o[17]||(o[17]=[i(" Next ")])),_:1,__:[17]},8,["href"])):(m(),f("span",Ye," Next "))])])):h("",!0)]))]),_:1})]),_:1})])])]),_:1})],64))}});export{bt as default};
