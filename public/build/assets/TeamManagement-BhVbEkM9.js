import{d as le,C as oe,q as ne,r as $,c as ie,x as I,a as u,b as r,e as s,u as e,g as re,f as n,h as l,k as b,n as _,t as i,i as d,F as h,m as k,p as de,D as ue,j as me,l as ce,v as fe}from"./app-B4CXrxA6.js";import{_ as pe}from"./AppLayout.vue_vue_type_script_setup_true_lang-j6gg2DV2.js";import{c as Q,_ as p}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-STRE1Pnw.js";import{_ as V,a as j}from"./CardContent.vue_vue_type_script_setup_true_lang-m18NTIW-.js";import{_ as z}from"./CardDescription.vue_vue_type_script_setup_true_lang-BIyOCfqp.js";import{_ as F,a as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-D4-SZOu1.js";import{_ as ve}from"./Input.vue_vue_type_script_setup_true_lang-DDdmzXzU.js";import{_ as B}from"./Label.vue_vue_type_script_setup_true_lang-CATyK9aN.js";import{_ as A,a as N,b as q,c as P}from"./DialogTitle.vue_vue_type_script_setup_true_lang-FpgTBn8y.js";import{_ as H,a as J}from"./DialogHeader.vue_vue_type_script_setup_true_lang-N81L0UwJ.js";import{C as S}from"./circle-check-big-C2Lj9Ip9.js";import{U as _e}from"./user-plus-BsbS2SUs.js";import{U}from"./user-L3Yh0_nP.js";import{T as G}from"./trash-2-w8SOKkJu.js";import{M as K}from"./mail-BgV6KoT7.js";import{D as ge}from"./dollar-sign-CHlIRE9b.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DjycHvFz.js";import"./useForwardExpose-e-VyqxC-.js";import"./RovingFocusGroup-Bp_bgarQ.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=Q("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=Q("CrownIcon",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),he={class:"p-6 space-y-6"},ye={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},xe={class:"flex items-start gap-3"},we={class:"flex-1"},ke={class:"text-green-800 font-medium"},Ce={class:"text-green-700 text-sm mt-1"},$e={class:"mt-3 flex items-center gap-2"},Ie={class:"flex items-center justify-between"},Ue={class:"text-3xl font-bold"},Se={class:"text-gray-600 mt-1"},Re={class:"space-y-4"},Te={class:"flex-1"},De={class:"flex items-center gap-3"},Me={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center"},Ee={class:"font-medium"},Ve={class:"text-sm text-gray-600"},je={class:"text-xs text-gray-500"},ze={class:"flex items-center gap-3"},Fe={class:"relative"},Le=["value","onChange","disabled"],Be=["value"],Ae={key:1,class:"w-9 h-9"},Ne={key:0,class:"text-center py-8 text-gray-500"},qe={class:"space-y-4"},Pe={class:"flex-1"},He={class:"flex items-center gap-3"},Je={class:"font-medium"},Ge={class:"text-sm text-gray-600"},Ke={class:"text-xs text-gray-500"},Oe={class:"flex items-center gap-2"},Qe={class:"mt-6"},We={key:0,class:"text-sm text-red-600 mt-1"},Xe={class:"relative mt-2"},Ye=["value"],Ze={key:0,class:"text-sm text-red-600 mt-1"},yt=le({__name:"TeamManagement",props:{team:{},members:{},pendingInvitations:{},availableRoles:{},canInviteUsers:{type:Boolean}},setup(et){const W=oe(),{t:f}=ne(),y=$(!1),x=$(!1),w=$(null),v=$(new Set),R=ie(()=>{var o,t;return((t=(o=W.props.auth)==null?void 0:o.user)==null?void 0:t.email)||""}),c=I({email:"",role:""}),T=I({role:""}),X=o=>{switch(o){case"Admin":return be;case"Finance":return ge;case"Employee":return U;default:return U}},Y=o=>{switch(o){case"Admin":return"text-red-600 bg-red-100";case"Finance":return"text-green-600 bg-green-100";case"Employee":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},Z=()=>{c.post(route("team.invitations.send"),{onSuccess:()=>{c.reset(),y.value=!1}})},ee=(o,t)=>{T.role=t,T.patch(route("team.users.role",o.id),{preserveScroll:!0})},te=o=>{I({}).delete(route("team.invitations.cancel",o),{preserveScroll:!0})},se=o=>{w.value=o,x.value=!0},ae=()=>{w.value&&I({}).delete(route("team.users.remove",w.value.id),{onSuccess:()=>{x.value=!1,w.value=null}})},D=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),M=async(o,t)=>{try{await navigator.clipboard.writeText(o),v.value.add(t),setTimeout(()=>{v.value.delete(t)},2e3)}catch(C){console.error("Failed to copy: ",C);const g=document.createElement("textarea");g.value=o,document.body.appendChild(g),g.select(),document.execCommand("copy"),document.body.removeChild(g),v.value.add(t),setTimeout(()=>{v.value.delete(t)},2e3)}};return(o,t)=>(r(),u(h,null,[s(e(re),{title:e(f)("team_management")},null,8,["title"]),s(pe,null,{default:n(()=>{var C,g;return[l("div",he,[(C=o.$page.props.flash)!=null&&C.success&&((g=o.$page.props.flash)!=null&&g.invitationUrl)?(r(),u("div",ye,[l("div",xe,[s(e(S),{class:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),l("div",we,[l("h3",ke,i(o.$page.props.flash.success),1),l("p",Ce,[d(i(e(f)("send_invitation"))+" ",1),l("strong",null,i(o.$page.props.flash.invitationEmail),1)]),l("div",$e,[s(e(p),{variant:"outline",size:"sm",onClick:t[0]||(t[0]=a=>M(o.$page.props.flash.invitationUrl,"flash-invitation")),class:"text-blue-600 hover:text-blue-700 hover:bg-blue-50"},{default:n(()=>[v.value.has("flash-invitation")?(r(),_(e(S),{key:0,class:"w-4 h-4 text-green-600"})):(r(),_(e(O),{key:1,class:"w-4 h-4"})),d(" "+i(v.value.has("flash-invitation")?e(f)("success"):e(f)("send_invitation")),1)]),_:1})])])])])):b("",!0),l("div",Ie,[l("div",null,[l("h1",Ue,i(e(f)("team_management")),1),l("p",Se,i(e(f)("manage_team"))+" "+i(o.team.name),1)]),o.canInviteUsers?(r(),_(e(p),{key:0,onClick:t[1]||(t[1]=a=>y.value=!0),class:"flex items-center gap-2"},{default:n(()=>[s(e(_e),{class:"w-4 h-4"}),d(" "+i(e(f)("invite_member")),1)]),_:1})):b("",!0)]),s(e(V),null,{default:n(()=>[s(e(F),null,{default:n(()=>[s(e(L),{class:"flex items-center gap-2"},{default:n(()=>[s(e(U),{class:"w-5 h-5"}),d(" "+i(e(f)("team_members"))+" ("+i(o.members.length)+") ",1)]),_:1}),s(e(z),null,{default:n(()=>[d(i(e(f)("manage_team")),1)]),_:1})]),_:1}),s(e(j),null,{default:n(()=>[l("div",Re,[(r(!0),u(h,null,k(o.members,a=>(r(),u("div",{key:a.id,class:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50"},[l("div",Te,[l("div",De,[l("div",Me,[s(e(U),{class:"w-5 h-5 text-gray-600"})]),l("div",null,[l("h3",Ee,i(a.name),1),l("p",Ve,i(a.email),1),l("p",je," Joined "+i(D(a.created_at)),1)])])]),l("div",ze,[(r(!0),u(h,null,k(a.roles,m=>(r(),u("div",{key:m,class:de(["flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",Y(m)])},[(r(),_(ue(X(m)),{class:"w-3 h-3"})),d(" "+i(m),1)],2))),128)),l("div",Fe,[l("select",{value:a.roles[0]||"",onChange:m=>ee(a,m.target.value),disabled:a.email===R.value,class:"flex h-9 w-32 rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[8]||(t[8]=l("option",{value:"",disabled:""},"Select role",-1)),(r(!0),u(h,null,k(o.availableRoles,(m,E)=>(r(),u("option",{key:E,value:E},i(m),9,Be))),128))],40,Le)]),a.email!==R.value?(r(),_(e(p),{key:0,variant:"outline",size:"sm",onClick:m=>se(a),class:"text-red-600 hover:text-red-700 hover:bg-red-50"},{default:n(()=>[s(e(G),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):(r(),u("div",Ae))])]))),128)),o.members.length===0?(r(),u("div",Ne," No team members found. ")):b("",!0)])]),_:1})]),_:1}),o.pendingInvitations.length>0?(r(),_(e(V),{key:1},{default:n(()=>[s(e(F),null,{default:n(()=>[s(e(L),{class:"flex items-center gap-2"},{default:n(()=>[s(e(K),{class:"w-5 h-5"}),d(" Pending Invitations ("+i(o.pendingInvitations.length)+") ",1)]),_:1}),s(e(z),null,{default:n(()=>t[9]||(t[9]=[d(" Invitations that have been sent but not yet accepted ")])),_:1,__:[9]})]),_:1}),s(e(j),null,{default:n(()=>[l("div",qe,[(r(!0),u(h,null,k(o.pendingInvitations,a=>(r(),u("div",{key:a.id,class:"flex items-center justify-between p-4 border rounded-lg bg-yellow-50 border-yellow-200"},[l("div",Pe,[l("div",He,[s(e(K),{class:"w-5 h-5 text-yellow-600"}),l("div",null,[l("h3",Je,i(a.email),1),l("p",Ge," Invited by "+i(a.invited_by)+" â€¢ Role: "+i(a.role),1),l("p",Ke," Expires "+i(D(a.expires_at)),1)])])]),l("div",Oe,[s(e(p),{variant:"outline",size:"sm",onClick:m=>M(a.invitation_url,`invitation-${a.id}`),class:"text-blue-600 hover:text-blue-700 hover:bg-blue-50"},{default:n(()=>[v.value.has(`invitation-${a.id}`)?(r(),_(e(S),{key:0,class:"w-4 h-4 text-green-600"})):(r(),_(e(O),{key:1,class:"w-4 h-4"})),d(" "+i(v.value.has(`invitation-${a.id}`)?"Copied!":"Copy Link"),1)]),_:2},1032,["onClick"]),s(e(p),{variant:"outline",size:"sm",onClick:m=>te(a.id),class:"text-red-600 hover:text-red-700 hover:bg-red-50"},{default:n(()=>[s(e(G),{class:"w-4 h-4"}),t[10]||(t[10]=d(" Cancel "))]),_:2,__:[10]},1032,["onClick"])])]))),128))])]),_:1})]),_:1})):b("",!0),s(e(A),{open:y.value,"onUpdate:open":t[5]||(t[5]=a=>y.value=a)},{default:n(()=>[s(e(N),{class:"sm:max-w-md"},{default:n(()=>[s(e(H),{class:"space-y-3"},{default:n(()=>[s(e(q),null,{default:n(()=>t[11]||(t[11]=[d("Invite Team Member")])),_:1,__:[11]}),s(e(P),null,{default:n(()=>[d(" Send an invitation to join "+i(o.team.name)+". They will receive an email with instructions to create their account. ",1)]),_:1})]),_:1}),l("div",Qe,[l("form",{onSubmit:me(Z,["prevent"]),class:"space-y-6"},[l("div",null,[s(e(B),{for:"email"},{default:n(()=>t[12]||(t[12]=[d("Email Address")])),_:1,__:[12]}),s(e(ve),{id:"email",modelValue:e(c).email,"onUpdate:modelValue":t[2]||(t[2]=a=>e(c).email=a),type:"email",placeholder:"Enter email address",required:"",disabled:e(c).processing,class:"mt-2"},null,8,["modelValue","disabled"]),e(c).errors.email?(r(),u("div",We,i(e(c).errors.email),1)):b("",!0)]),l("div",null,[s(e(B),{for:"role"},{default:n(()=>t[13]||(t[13]=[d("Role")])),_:1,__:[13]}),l("div",Xe,[ce(l("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>e(c).role=a),required:"",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[14]||(t[14]=l("option",{value:"",disabled:""},"Select a role",-1)),(r(!0),u(h,null,k(o.availableRoles,(a,m)=>(r(),u("option",{key:m,value:m},i(a),9,Ye))),128))],512),[[fe,e(c).role]])]),e(c).errors.role?(r(),u("div",Ze,i(e(c).errors.role),1)):b("",!0)]),s(e(J),{class:"pt-4"},{default:n(()=>[s(e(p),{type:"button",variant:"outline",onClick:t[4]||(t[4]=a=>y.value=!1)},{default:n(()=>t[15]||(t[15]=[d(" Cancel ")])),_:1,__:[15]}),s(e(p),{type:"submit",disabled:e(c).processing},{default:n(()=>[d(i(e(c).processing?"Sending...":"Send Invitation"),1)]),_:1},8,["disabled"])]),_:1})],32)])]),_:1})]),_:1},8,["open"]),s(e(A),{open:x.value,"onUpdate:open":t[7]||(t[7]=a=>x.value=a)},{default:n(()=>[s(e(N),{class:"sm:max-w-md"},{default:n(()=>[s(e(H),null,{default:n(()=>[s(e(q),null,{default:n(()=>t[16]||(t[16]=[d("Remove Team Member")])),_:1,__:[16]}),s(e(P),null,{default:n(()=>{var a;return[d(" Are you sure you want to remove "+i((a=w.value)==null?void 0:a.name)+" from the team? This action cannot be undone. ",1)]}),_:1})]),_:1}),s(e(J),null,{default:n(()=>[s(e(p),{type:"button",variant:"outline",onClick:t[6]||(t[6]=a=>x.value=!1)},{default:n(()=>t[17]||(t[17]=[d(" Cancel ")])),_:1,__:[17]}),s(e(p),{type:"button",variant:"destructive",onClick:ae},{default:n(()=>t[18]||(t[18]=[d(" Remove Member ")])),_:1,__:[18]})]),_:1})]),_:1})]),_:1},8,["open"])])]}),_:1})],64))}});export{yt as default};
