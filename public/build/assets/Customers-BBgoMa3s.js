import{d as O,q as W,r as P,w as X,a as f,b as m,e as s,u as e,g as Y,f as r,h as t,t as o,n as g,k as v,i as c,F as j,m as D,p as I,S as N,x as Z,J as V}from"./app-B4CXrxA6.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-j6gg2DV2.js";import{_ as y,a as b}from"./CardContent.vue_vue_type_script_setup_true_lang-m18NTIW-.js";import{_ as te}from"./CardDescription.vue_vue_type_script_setup_true_lang-BIyOCfqp.js";import{_ as w,a as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-D4-SZOu1.js";import{c as M,_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-STRE1Pnw.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-DDdmzXzU.js";import{_ as oe,a as ae,b as re,c as le}from"./DialogTitle.vue_vue_type_script_setup_true_lang-FpgTBn8y.js";import{_ as ne}from"./DialogHeader.vue_vue_type_script_setup_true_lang-N81L0UwJ.js";import{_ as de}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-Dyc_y_dE.js";import{_ as ie}from"./CreateCustomerForm.vue_vue_type_script_setup_true_lang-Dke6jO2D.js";import{S as T}from"./search-Carplw_e.js";import{P as L}from"./plus-CV8EWWeN.js";import{U as k}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DjycHvFz.js";import{M as ce}from"./mail-BgV6KoT7.js";import{C as ue}from"./calendar-DJueTjsM.js";import{S as me}from"./square-pen-XAvm42ww.js";import{T as _e}from"./trash-2-w8SOKkJu.js";import"./useForwardExpose-e-VyqxC-.js";import"./RovingFocusGroup-Bp_bgarQ.js";import"./Label.vue_vue_type_script_setup_true_lang-CATyK9aN.js";import"./Textarea.vue_vue_type_script_setup_true_lang-IN3GIl-3.js";import"./InputError.vue_vue_type_script_setup_true_lang-D97mxckp.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=M("CreditCardIcon",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=M("PhoneIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),pe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},xe={class:"space-y-6"},ge={class:"flex items-center justify-between"},ve={class:"text-3xl font-bold tracking-tight"},ye={class:"text-muted-foreground"},be={class:"flex items-center gap-4"},we={class:"relative"},$e={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},ke={class:"text-2xl font-bold"},Ce={class:"text-xs text-muted-foreground"},Se={class:"text-2xl font-bold"},Pe={class:"text-xs text-muted-foreground"},je={class:"text-2xl font-bold"},Ne={class:"text-xs text-muted-foreground"},Ue={key:0,class:"flex items-center justify-center py-12"},ze={class:"text-center"},De={class:"mt-4 text-lg font-semibold"},Ie={class:"mt-2 text-sm text-muted-foreground"},Ve={class:"mt-4 flex gap-2 justify-center"},Te={key:1,class:"space-y-4"},Le={key:0,class:"flex items-center justify-between p-3 bg-muted/50 rounded-md"},Me={class:"flex items-center gap-2"},Ae={class:"text-sm text-muted-foreground"},Be={class:"rounded-md border"},Re={class:"w-full"},qe={class:"border-b bg-muted/50"},Fe={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},Ee={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},Je={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},Qe={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},Ge={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},He={class:"p-4 align-middle"},Ke={class:"font-medium"},Oe={class:"text-sm text-muted-foreground"},We={class:"text-xs text-muted-foreground"},Xe={class:"p-4 align-middle"},Ye={class:"flex items-center gap-2 text-sm"},Ze={class:"flex items-center gap-2 text-sm text-muted-foreground"},et={class:"p-4 align-middle"},tt={class:"flex items-center gap-2 text-sm"},st={class:"flex items-center gap-2 text-sm text-muted-foreground"},ot={class:"p-4 align-middle"},at={class:"p-4 align-middle"},rt={class:"flex items-center gap-2"},lt={key:1,class:"flex items-center justify-between mt-6"},nt={class:"text-sm text-muted-foreground"},dt={class:"flex items-center gap-2"},it={key:1,class:"px-3 py-2 text-sm border rounded-md text-muted-foreground cursor-not-allowed bg-muted/50"},ct={key:3,class:"px-3 py-2 text-sm border rounded-md text-muted-foreground cursor-not-allowed bg-muted/50"},Vt=O({__name:"Customers",props:{customers:{},stats:{},search:{}},setup(A){const n=A,{t:a}=W(),B=[{title:a("dashboard"),href:"/dashboard"},{title:a("customers"),href:"/customers"}],h=P(!1),_=P(null),i=P(n.search||""),U=()=>{_.value=null,h.value=!0},R=d=>{_.value=d,h.value=!0},q=d=>{_.value?d.put(`/customers/${_.value.id}`,{onSuccess:()=>{h.value=!1,_.value=null}}):d.post("/customers",{onSuccess:()=>{h.value=!1,_.value=null}})},F=()=>{h.value=!1,_.value=null},E=d=>{confirm(a("delete_customer_confirm"))&&Z({}).delete(`/customers/${d.id}`)},J=d=>new Date(d).toLocaleDateString(),Q=d=>`${d.first_name} ${d.last_name}`,G=()=>{const d=n.customers.current_page,u=n.customers.last_page,l=[];if(u<=10)for(let p=1;p<=u;p++)l.push(p);else{const p=Math.max(1,d-2),K=Math.min(u,d+2);for(let S=p;S<=K;S++)l.push(S)}return l},H=()=>{const d=new URLSearchParams;i.value.trim()&&d.append("search",i.value.trim());const u=`/customers${d.toString()?"?"+d.toString():""}`;V.get(u,{},{preserveState:!0,preserveScroll:!1})},C=()=>{i.value="",V.get("/customers",{},{preserveState:!0,preserveScroll:!1})};let z;return X(i,(d,u)=>{d!==u&&(clearTimeout(z),z=setTimeout(()=>{H()},500))}),(d,u)=>(m(),f(j,null,[s(e(Y),{title:e(a)("customers")},null,8,["title"]),s(ee,{breadcrumbs:B},{default:r(()=>[t("div",pe,[t("div",xe,[t("div",ge,[t("div",null,[t("h1",ve,o(e(a)("customers")),1),t("p",ye,o(e(a)("manage_customers")),1)]),t("div",be,[t("div",we,[s(e(T),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s(e(se),{modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=l=>i.value=l),placeholder:e(a)("search_customers"),class:"pl-10 w-64"},null,8,["modelValue","placeholder"]),i.value?(m(),g(e(x),{key:0,variant:"ghost",size:"sm",class:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0",onClick:C},{default:r(()=>u[2]||(u[2]=[c(" Ã— ")])),_:1,__:[2]})):v("",!0)]),s(e(oe),{open:h.value,"onUpdate:open":u[1]||(u[1]=l=>h.value=l)},{default:r(()=>[s(e(de),{"as-child":""},{default:r(()=>[s(e(x),{onClick:U},{default:r(()=>[s(e(L),{class:"mr-2 h-4 w-4"}),c(" "+o(e(a)("add_customer")),1)]),_:1})]),_:1}),s(e(ae),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:r(()=>[s(e(ne),null,{default:r(()=>[s(e(re),null,{default:r(()=>[c(o(_.value?e(a)("edit_customer"):e(a)("add_customer")),1)]),_:1}),s(e(le),null,{default:r(()=>[c(o(_.value?e(a)("update_profile_info"):e(a)("customer_information")),1)]),_:1})]),_:1}),s(ie,{"editing-customer":_.value,onSubmit:q,onCancel:F},null,8,["editing-customer"])]),_:1})]),_:1},8,["open"])])]),t("div",$e,[s(e(y),null,{default:r(()=>[s(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(e($),{class:"text-sm font-medium"},{default:r(()=>[c(o(e(a)("total_customers")),1)]),_:1}),s(e(k),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(b),null,{default:r(()=>[t("div",ke,o(n.stats.total),1),t("p",Ce,o(n.stats.total===0?e(a)("no_data"):e(a)("total_customers")),1)]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(e($),{class:"text-sm font-medium"},{default:r(()=>[c(o(e(a)("active_customers")),1)]),_:1}),s(e(k),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(b),null,{default:r(()=>[t("div",Se,o(n.stats.active),1),t("p",Pe,o(e(a)("active")),1)]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:r(()=>[s(e($),{class:"text-sm font-medium"},{default:r(()=>[c(o(e(a)("new_this_month")),1)]),_:1}),s(e(k),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(b),null,{default:r(()=>[t("div",je,o(n.stats.new_this_month),1),t("p",Ne,o(e(a)("new_this_month")),1)]),_:1})]),_:1})]),s(e(y),null,{default:r(()=>[s(e(w),null,{default:r(()=>[s(e($),null,{default:r(()=>[c(o(e(a)("customers")),1)]),_:1}),s(e(te),null,{default:r(()=>[c(o(e(a)("manage_customers")),1)]),_:1})]),_:1}),s(e(b),null,{default:r(()=>[n.customers.data.length===0?(m(),f("div",Ue,[t("div",ze,[s(e(k),{class:"mx-auto h-16 w-16 text-muted-foreground/50"}),t("h3",De,o(i.value?e(a)("no_results"):e(a)("no_data")),1),t("p",Ie,o(i.value?`${e(a)("no_results")} "${i.value}"`:e(a)("manage_customers")),1),t("div",Ve,[i.value?(m(),g(e(x),{key:0,variant:"outline",onClick:C},{default:r(()=>[c(o(e(a)("clear_search")),1)]),_:1})):v("",!0),s(e(x),{onClick:U},{default:r(()=>[s(e(L),{class:"mr-2 h-4 w-4"}),c(" "+o(e(a)("add_customer")),1)]),_:1})])])])):(m(),f("div",Te,[i.value?(m(),f("div",Le,[t("div",Me,[s(e(T),{class:"h-4 w-4 text-muted-foreground"}),t("span",Ae,o(e(a)("showing"))+" "+o(n.customers.total)+" "+o(e(a)("results"))+' "'+o(i.value)+'" ',1)]),s(e(x),{variant:"ghost",size:"sm",onClick:C},{default:r(()=>[c(o(e(a)("clear_search")),1)]),_:1})])):v("",!0),t("div",Be,[t("table",Re,[t("thead",null,[t("tr",qe,[t("th",Fe,o(e(a)("name")),1),t("th",Ee,o(e(a)("phone")),1),t("th",Je,o(e(a)("drivers_license")),1),t("th",Qe,o(e(a)("status")),1),t("th",Ge,o(e(a)("actions")),1)])]),t("tbody",null,[(m(!0),f(j,null,D(n.customers.data,l=>(m(),f("tr",{key:l.id,class:"border-b transition-colors hover:bg-muted/50"},[t("td",He,[t("div",Ke,o(Q(l)),1),t("div",Oe,o(l.country),1),t("div",We,o(l.nationality),1)]),t("td",Xe,[t("div",Ye,[s(e(ce),{class:"h-4 w-4"}),c(" "+o(l.email),1)]),t("div",Ze,[s(e(he),{class:"h-4 w-4"}),c(" "+o(l.phone),1)])]),t("td",et,[t("div",tt,[s(e(fe),{class:"h-4 w-4"}),c(" "+o(l.drivers_license_number),1)]),t("div",st,[s(e(ue),{class:"h-4 w-4"}),c(" "+o(e(a)("license_expiry"))+": "+o(J(l.drivers_license_expiry)),1)])]),t("td",ot,[t("span",{class:I(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{"bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20":l.status==="active","bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/20":l.status==="inactive"}])},o(l.status==="active"?e(a)("active"):e(a)("inactive")),3)]),t("td",at,[t("div",rt,[s(e(x),{size:"sm",variant:"ghost",onClick:p=>R(l)},{default:r(()=>[s(e(me),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),s(e(x),{size:"sm",variant:"ghost",onClick:p=>E(l),class:"text-red-600 hover:text-red-700"},{default:r(()=>[s(e(_e),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])])]),n.customers.last_page>1?(m(),f("div",lt,[t("p",nt," Showing "+o(n.customers.from??0)+" to "+o(n.customers.to??0)+" of "+o(n.customers.total)+" results ",1),t("div",dt,[n.customers.current_page>1?(m(),g(e(N),{key:0,href:`/customers?page=${n.customers.current_page-1}${i.value?"&search="+encodeURIComponent(i.value):""}`,class:"px-3 py-2 text-sm border rounded-md transition-colors hover:bg-muted"},{default:r(()=>u[3]||(u[3]=[c(" Previous ")])),_:1,__:[3]},8,["href"])):(m(),f("span",it," Previous ")),(m(!0),f(j,null,D(G(),l=>(m(),g(e(N),{key:`page-${l}`,href:`/customers?page=${l}${i.value?"&search="+encodeURIComponent(i.value):""}`,class:I(["px-3 py-2 text-sm border rounded-md transition-colors",{"bg-primary text-primary-foreground border-primary":l===n.customers.current_page,"hover:bg-muted":l!==n.customers.current_page}])},{default:r(()=>[c(o(l),1)]),_:2},1032,["href","class"]))),128)),n.customers.current_page<n.customers.last_page?(m(),g(e(N),{key:2,href:`/customers?page=${n.customers.current_page+1}${i.value?"&search="+encodeURIComponent(i.value):""}`,class:"px-3 py-2 text-sm border rounded-md transition-colors hover:bg-muted"},{default:r(()=>u[4]||(u[4]=[c(" Next ")])),_:1,__:[4]},8,["href"])):(m(),f("span",ct," Next "))])])):v("",!0)]))]),_:1})]),_:1})])])]),_:1})],64))}});export{Vt as default};
