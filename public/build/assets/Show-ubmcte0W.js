import{d as H,r as L,x as z,c as m,o as u,a as o,b as a,e as t,u as s,S as E,t as i,i as r,F as b,m as g,f as O,h as A,n as T,j as G,k as y,l as w,v as h}from"./app-B0Y7WZKT.js";import{_ as J}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-C9UPZ3OS.js";import{c as U,_ as f}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CdW4O66k.js";import{_ as k,a as P,b as D,c as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-DBaR-C81.js";import{_ as K}from"./CardDescription.vue_vue_type_script_setup_true_lang-CVuUofmO.js";import{d as Q,a as W,b as X,c as Y,_ as Z}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C6PMbsTz.js";import{A as tt}from"./arrow-left-B9Mx02ry.js";import{D as et}from"./dollar-sign-Z-IaoCJd.js";import{f as j}from"./format-Bw_hER4B.js";import"./useForwardExpose-CwVdPpiZ.js";import"./RovingFocusGroup-CiOKQAuO.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=U("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=U("PrinterIcon",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),nt={class:"container mx-auto p-6 max-w-7xl"},lt={class:"flex items-center justify-between mb-8"},ot={class:"flex items-center gap-4"},it={class:"text-2xl font-semibold"},at={class:"flex items-center gap-3"},dt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ut={class:"text-gray-500"},rt={key:0,class:"text-gray-500"},mt={key:1,class:"text-gray-500 mt-1"},pt={class:"text-gray-500"},ft={class:"grid grid-cols-2 gap-4"},yt={class:"grid grid-cols-2 gap-4"},ct={class:"space-y-6"},vt={class:"w-full"},_t={class:"divide-y"},bt={class:"py-2 text-sm"},xt={class:"py-2 text-sm text-right"},gt={class:"py-2 text-sm text-right"},wt={class:"py-2 text-sm text-right"},ht={class:"space-y-2 pt-4 border-t"},kt={class:"flex justify-between text-sm"},Pt={class:"flex justify-between text-sm"},Dt={class:"flex justify-between text-sm"},Ct={class:"font-medium"},St={class:"flex justify-between text-sm"},Mt={class:"flex justify-between text-sm font-medium pt-2 border-t"},$t={key:0},Vt={class:"w-full text-sm"},At={class:"py-3 px-4"},Tt={class:"py-3 px-4"},jt={class:"py-3 px-4"},It={class:"py-3 px-4"},Ut={class:"py-3 px-4"},Nt={class:"py-3 px-4"},qt={class:"py-3 px-4"},Bt={class:"py-3 px-4"},Ft={key:1,class:"text-gray-500 py-4 text-center"},Rt={class:"flex justify-end gap-2 mt-4"},Yt=H({__name:"Show",props:{invoice:{}},setup(N){const x=N,S=[{value:"unpaid",label:"Unpaid",color:"text-red-500"},{value:"paid",label:"Paid",color:"text-green-500"},{value:"partial",label:"Partial Paid",color:"text-yellow-500"}],M=n=>{var e;return((e=S.find(l=>l.value===n))==null?void 0:e.color)||"text-gray-500"},p=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:x.invoice.currency}).format(n),c=n=>j(new Date(n),"MMM dd, yyyy HH:mm");function q(){window.open(`/invoices/${x.invoice.id}/pdf`,"_blank")}function $(n){window.open(`/payments/${n}/receipt`,"_blank")}const _=L(!1),d=z({amount:"",payment_method:"",payment_date:j(new Date,"yyyy-MM-dd"),status:"completed",notes:"",transaction_type:"payment"});function B(){_.value=!0}function V(){_.value=!1,d.reset()}function F(){d.post(route("payments.store",{invoice:x.invoice.id}),{onSuccess:()=>{V()}})}function R(n){return n==="deposit"?"Security Deposit":n==="refund"?"Refund":"Payment"}return(n,e)=>(u(),m(b,null,[o(J,null,{default:a(()=>[t("div",nt,[t("div",lt,[t("div",ot,[o(s(f),{variant:"ghost",size:"icon","as-child":"",class:"hover:bg-gray-100"},{default:a(()=>[o(s(E),{href:n.route("invoices")},{default:a(()=>[o(s(tt),{class:"h-5 w-5"})]),_:1},8,["href"])]),_:1}),t("div",null,[t("h1",it,"Invoice #"+i(n.invoice.invoice_number),1),e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 mt-1"},"View invoice details",-1))])]),t("div",at,[o(s(f),{variant:"outline",class:"flex items-center gap-2",onClick:q},{default:a(()=>[o(s(st),{class:"h-4 w-4"}),e[8]||(e[8]=r(" Download PDF "))]),_:1,__:[8]}),(u(!0),m(b,null,g(n.invoice.payments,l=>(u(),O(s(f),{variant:"outline",class:"flex items-center gap-2",onClick:v=>$(l.id),key:l.id},{default:a(()=>[o(s(I),{class:"h-4 w-4"}),e[9]||(e[9]=r(" Print Receipt "))]),_:2,__:[9]},1032,["onClick"]))),128)),o(s(f),{class:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",onClick:B},{default:a(()=>[o(s(et),{class:"h-4 w-4"}),e[10]||(e[10]=r(" Add Payment "))]),_:1,__:[10]})])]),t("div",dt,[o(s(k),null,{default:a(()=>[o(s(P),null,{default:a(()=>[o(s(D),null,{default:a(()=>e[11]||(e[11]=[r("Basic Information")])),_:1,__:[11]})]),_:1}),o(s(C),{class:"space-y-6"},{default:a(()=>{var l;return[t("div",null,[e[12]||(e[12]=t("h3",{class:"font-medium mb-2"},"Customer",-1)),t("p",null,i(n.invoice.customer.name),1),t("p",ut,i(n.invoice.customer.email),1),n.invoice.customer.phone?(u(),m("p",rt,i(n.invoice.customer.phone),1)):A("",!0),n.invoice.customer.address?(u(),m("p",mt,i(n.invoice.customer.address),1)):A("",!0)]),t("div",null,[e[13]||(e[13]=t("h3",{class:"font-medium mb-2"},"Vehicle",-1)),t("p",null,i(n.invoice.vehicle.make)+" "+i(n.invoice.vehicle.model),1),t("p",pt,"Plate: "+i(n.invoice.vehicle.plate_number),1)]),t("div",ft,[t("div",null,[e[14]||(e[14]=t("h3",{class:"font-medium mb-2"},"Invoice Date",-1)),t("p",null,i(c(n.invoice.invoice_date)),1)]),t("div",null,[e[15]||(e[15]=t("h3",{class:"font-medium mb-2"},"Due Date",-1)),t("p",null,i(c(n.invoice.due_date)),1)])]),t("div",yt,[t("div",null,[e[16]||(e[16]=t("h3",{class:"font-medium mb-2"},"Start Date",-1)),t("p",null,i(c(n.invoice.start_datetime)),1)]),t("div",null,[e[17]||(e[17]=t("h3",{class:"font-medium mb-2"},"End Date",-1)),t("p",null,i(c(n.invoice.end_datetime)),1)])]),t("div",null,[e[18]||(e[18]=t("h3",{class:"font-medium mb-2"},"Status",-1)),t("p",{class:T(["font-medium",M(n.invoice.status)])},i((l=S.find(v=>v.value===n.invoice.status))==null?void 0:l.label),3)])]}),_:1})]),_:1}),o(s(k),null,{default:a(()=>[o(s(P),null,{default:a(()=>[o(s(D),null,{default:a(()=>e[19]||(e[19]=[r("Invoice Items")])),_:1,__:[19]})]),_:1}),o(s(C),null,{default:a(()=>[t("div",ct,[t("table",vt,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"text-left py-2 text-sm font-medium text-gray-500"},"Description"),t("th",{class:"text-right py-2 text-sm font-medium text-gray-500"},"Amount"),t("th",{class:"text-right py-2 text-sm font-medium text-gray-500"},"Discount"),t("th",{class:"text-right py-2 text-sm font-medium text-gray-500"},"Total")])],-1)),t("tbody",_t,[(u(!0),m(b,null,g(n.invoice.items,(l,v)=>(u(),m("tr",{key:v},[t("td",bt,i(l.description),1),t("td",xt,i(p(l.amount)),1),t("td",gt,i(p(l.discount)),1),t("td",wt,i(p(l.amount-l.discount)),1)]))),128))])]),t("div",ht,[t("div",kt,[e[21]||(e[21]=t("span",{class:"text-gray-500"},"Sub Total",-1)),t("span",null,i(p(n.invoice.sub_total)),1)]),t("div",Pt,[e[22]||(e[22]=t("span",{class:"text-gray-500"},"Total Discount",-1)),t("span",null,i(p(n.invoice.total_discount)),1)]),t("div",Dt,[e[23]||(e[23]=t("span",{class:"text-gray-500"},"Total Amount",-1)),t("span",Ct,i(p(n.invoice.total_amount)),1)]),t("div",St,[e[24]||(e[24]=t("span",{class:"text-gray-500"},"Paid Amount",-1)),t("span",null,i(p(n.invoice.paid_amount)),1)]),t("div",Mt,[e[25]||(e[25]=t("span",null,"Remaining Amount",-1)),t("span",{class:T(M(n.invoice.status))},i(p(n.invoice.remaining_amount)),3)])])])]),_:1})]),_:1})]),o(s(k),{class:"mt-8"},{default:a(()=>[o(s(P),null,{default:a(()=>[o(s(D),null,{default:a(()=>e[26]||(e[26]=[r("Payment History")])),_:1,__:[26]}),o(s(K),null,{default:a(()=>e[27]||(e[27]=[r("All payments made for this invoice.")])),_:1,__:[27]})]),_:1}),o(s(C),null,{default:a(()=>[n.invoice.payments&&n.invoice.payments.length>0?(u(),m("div",$t,[t("table",Vt,[e[28]||(e[28]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"py-2 text-left"},"Date"),t("th",{class:"py-2 text-left"},"Method"),t("th",{class:"py-2 text-left"},"Reference"),t("th",{class:"py-2 text-right"},"Amount"),t("th",{class:"py-2 text-center"},"Status"),t("th",{class:"py-2 text-left"},"Type"),t("th",{class:"py-2 text-left"},"Notes"),t("th",{class:"py-2 text-right"},"Actions")])],-1)),t("tbody",null,[(u(!0),m(b,null,g(n.invoice.payments,l=>(u(),m("tr",{key:l.id,class:"border-b"},[t("td",At,i(c(l.payment_date)),1),t("td",Tt,i(l.payment_method),1),t("td",jt,i(l.reference_number||"-"),1),t("td",It,i(p(l.amount)),1),t("td",Ut,i(l.status),1),t("td",Nt,i(R(l.transaction_type)),1),t("td",qt,i(l.notes||"-"),1),t("td",Bt,[o(s(f),{variant:"ghost",size:"icon",onClick:v=>$(l.id)},{default:a(()=>[o(s(I),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]))),128))])])])):(u(),m("div",Ft,"No payments found for this invoice."))]),_:1})]),_:1})])]),_:1}),o(s(Z),{open:_.value,"onUpdate:open":e[6]||(e[6]=l=>_.value=l)},{default:a(()=>[o(s(Q)),o(s(W),{class:"max-w-md w-full"},{default:a(()=>[o(s(X),null,{default:a(()=>e[29]||(e[29]=[r("Add Payment")])),_:1,__:[29]}),o(s(Y),null,{default:a(()=>e[30]||(e[30]=[r("Enter payment details for this invoice.")])),_:1,__:[30]}),t("form",{onSubmit:G(F,["prevent"]),class:"space-y-4 mt-4"},[t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium mb-1"},"Amount",-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s(d).amount=l),type:"number",min:"0",step:"0.01",class:"input w-full",required:""},null,512),[[w,s(d).amount]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium mb-1"},"Payment Method",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>s(d).payment_method=l),class:"input w-full",required:""},e[32]||(e[32]=[t("option",{value:""},"Select method",-1),t("option",{value:"cash"},"Cash",-1),t("option",{value:"credit_card"},"Credit Card",-1),t("option",{value:"bank_transfer"},"Bank Transfer",-1),t("option",{value:"other"},"Other",-1)]),512),[[h,s(d).payment_method]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium mb-1"},"Payment Date",-1)),y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s(d).payment_date=l),type:"date",class:"input w-full",required:""},null,512),[[w,s(d).payment_date]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium mb-1"},"Status",-1)),y(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>s(d).status=l),class:"input w-full",required:""},e[35]||(e[35]=[t("option",{value:"completed"},"Completed",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"failed"},"Failed",-1)]),512),[[h,s(d).status]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium mb-1"},"Transaction Type",-1)),y(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>s(d).transaction_type=l),class:"input w-full",required:""},e[37]||(e[37]=[t("option",{value:"payment"},"Payment",-1),t("option",{value:"deposit"},"Security Deposit",-1),t("option",{value:"refund"},"Refund",-1)]),512),[[h,s(d).transaction_type]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium mb-1"},"Notes",-1)),y(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>s(d).notes=l),class:"input w-full",rows:"2"},null,512),[[w,s(d).notes]])]),t("div",Rt,[o(s(f),{type:"button",variant:"outline",onClick:V},{default:a(()=>e[40]||(e[40]=[r("Cancel")])),_:1,__:[40]}),o(s(f),{type:"submit",disabled:s(d).processing},{default:a(()=>e[41]||(e[41]=[r("Save Payment")])),_:1,__:[41]},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"])],64))}});export{Yt as default};
