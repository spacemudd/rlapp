import{d as ae,B as le,r as C,c as oe,x as $,a as u,b as i,e as s,u as e,g as ne,f as n,h as l,k as g,n as v,t as r,i as d,F as b,m as w,p as ie,C as re,j as de,l as ue,v as me}from"./app-MFR4BbP7.js";import{_ as ce}from"./AppLayout.vue_vue_type_script_setup_true_lang-DGSkcNZ3.js";import{c as O,_ as f}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BqggL-pA.js";import{_ as E,a as V}from"./CardContent.vue_vue_type_script_setup_true_lang-B8g2wv9O.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bi_-01Ek.js";import{_ as j,a as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-cm-Rhi5Z.js";import{_ as fe}from"./Input.vue_vue_type_script_setup_true_lang-CY_VYH_P.js";import{_ as B}from"./Label.vue_vue_type_script_setup_true_lang-XA0K4agb.js";import{_ as F,a as A,b as N,c as q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BbdgFYV3.js";import{_ as P,a as H}from"./DialogHeader.vue_vue_type_script_setup_true_lang-DPaRI3Us.js";import{C as U}from"./circle-check-big-wvLCB8rw.js";import{U as pe}from"./user-plus-CDfWVShi.js";import{U as I}from"./user-SavuJcgL.js";import{T as J}from"./trash-2-DJD9MHB5.js";import{M as G}from"./mail-DKSeSKRe.js";import{D as ve}from"./dollar-sign-C6QJC0ez.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-BFRXg0WU.js";import"./useForwardExpose-BjvGK7kz.js";import"./RovingFocusGroup-BqEWoKPP.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=O("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=O("CrownIcon",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),ge={class:"p-6 space-y-6"},be={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},ye={class:"flex items-start gap-3"},he={class:"flex-1"},xe={class:"text-green-800 font-medium"},we={class:"text-green-700 text-sm mt-1"},ke={class:"mt-3 flex items-center gap-2"},Ce={class:"flex items-center justify-between"},$e={class:"text-gray-600 mt-1"},Ie={class:"space-y-4"},Ue={class:"flex-1"},Me={class:"flex items-center gap-3"},Se={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center"},Te={class:"font-medium"},Re={class:"text-sm text-gray-600"},De={class:"text-xs text-gray-500"},Ee={class:"flex items-center gap-3"},Ve={class:"relative"},Le=["value","onChange","disabled"],je=["value"],ze={key:1,class:"w-9 h-9"},Be={key:0,class:"text-center py-8 text-gray-500"},Fe={class:"space-y-4"},Ae={class:"flex-1"},Ne={class:"flex items-center gap-3"},qe={class:"font-medium"},Pe={class:"text-sm text-gray-600"},He={class:"text-xs text-gray-500"},Je={class:"flex items-center gap-2"},Ge={class:"mt-6"},Ke={key:0,class:"text-sm text-red-600 mt-1"},Oe={class:"relative mt-2"},Qe=["value"],We={key:0,class:"text-sm text-red-600 mt-1"},gt=ae({__name:"TeamManagement",props:{team:{},members:{},pendingInvitations:{},availableRoles:{},canInviteUsers:{type:Boolean}},setup(Xe){const Q=le(),y=C(!1),h=C(!1),x=C(null),p=C(new Set),M=oe(()=>{var o,t;return((t=(o=Q.props.auth)==null?void 0:o.user)==null?void 0:t.email)||""}),c=$({email:"",role:""}),S=$({role:""}),W=o=>{switch(o){case"Admin":return _e;case"Finance":return ve;case"Employee":return I;default:return I}},X=o=>{switch(o){case"Admin":return"text-red-600 bg-red-100";case"Finance":return"text-green-600 bg-green-100";case"Employee":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},Y=()=>{c.post(route("team.invitations.send"),{onSuccess:()=>{c.reset(),y.value=!1}})},Z=(o,t)=>{S.role=t,S.patch(route("team.users.role",o.id),{preserveScroll:!0})},ee=o=>{$({}).delete(route("team.invitations.cancel",o),{preserveScroll:!0})},te=o=>{x.value=o,h.value=!0},se=()=>{x.value&&$({}).delete(route("team.users.remove",x.value.id),{onSuccess:()=>{h.value=!1,x.value=null}})},T=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),R=async(o,t)=>{try{await navigator.clipboard.writeText(o),p.value.add(t),setTimeout(()=>{p.value.delete(t)},2e3)}catch(k){console.error("Failed to copy: ",k);const _=document.createElement("textarea");_.value=o,document.body.appendChild(_),_.select(),document.execCommand("copy"),document.body.removeChild(_),p.value.add(t),setTimeout(()=>{p.value.delete(t)},2e3)}};return(o,t)=>(i(),u(b,null,[s(e(ne),{title:"Team Management"}),s(ce,null,{default:n(()=>{var k,_;return[l("div",ge,[(k=o.$page.props.flash)!=null&&k.success&&((_=o.$page.props.flash)!=null&&_.invitationUrl)?(i(),u("div",be,[l("div",ye,[s(e(U),{class:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),l("div",he,[l("h3",xe,r(o.$page.props.flash.success),1),l("p",we,[t[8]||(t[8]=d(" Invitation sent to ")),l("strong",null,r(o.$page.props.flash.invitationEmail),1)]),l("div",ke,[s(e(f),{variant:"outline",size:"sm",onClick:t[0]||(t[0]=a=>R(o.$page.props.flash.invitationUrl,"flash-invitation")),class:"text-blue-600 hover:text-blue-700 hover:bg-blue-50"},{default:n(()=>[p.value.has("flash-invitation")?(i(),v(e(U),{key:0,class:"w-4 h-4 text-green-600"})):(i(),v(e(K),{key:1,class:"w-4 h-4"})),d(" "+r(p.value.has("flash-invitation")?"Copied!":"Copy Invitation Link"),1)]),_:1})])])])])):g("",!0),l("div",Ce,[l("div",null,[t[9]||(t[9]=l("h1",{class:"text-3xl font-bold"},"Team Management",-1)),l("p",$e," Manage your team members and their roles for "+r(o.team.name),1)]),o.canInviteUsers?(i(),v(e(f),{key:0,onClick:t[1]||(t[1]=a=>y.value=!0),class:"flex items-center gap-2"},{default:n(()=>[s(e(pe),{class:"w-4 h-4"}),t[10]||(t[10]=d(" Invite Member "))]),_:1,__:[10]})):g("",!0)]),s(e(E),null,{default:n(()=>[s(e(j),null,{default:n(()=>[s(e(z),{class:"flex items-center gap-2"},{default:n(()=>[s(e(I),{class:"w-5 h-5"}),d(" Team Members ("+r(o.members.length)+") ",1)]),_:1}),s(e(L),null,{default:n(()=>t[11]||(t[11]=[d(" Current members of your team and their assigned roles ")])),_:1,__:[11]})]),_:1}),s(e(V),null,{default:n(()=>[l("div",Ie,[(i(!0),u(b,null,w(o.members,a=>(i(),u("div",{key:a.id,class:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50"},[l("div",Ue,[l("div",Me,[l("div",Se,[s(e(I),{class:"w-5 h-5 text-gray-600"})]),l("div",null,[l("h3",Te,r(a.name),1),l("p",Re,r(a.email),1),l("p",De," Joined "+r(T(a.created_at)),1)])])]),l("div",Ee,[(i(!0),u(b,null,w(a.roles,m=>(i(),u("div",{key:m,class:ie(["flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",X(m)])},[(i(),v(re(W(m)),{class:"w-3 h-3"})),d(" "+r(m),1)],2))),128)),l("div",Ve,[l("select",{value:a.roles[0]||"",onChange:m=>Z(a,m.target.value),disabled:a.email===M.value,class:"flex h-9 w-32 rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[12]||(t[12]=l("option",{value:"",disabled:""},"Select role",-1)),(i(!0),u(b,null,w(o.availableRoles,(m,D)=>(i(),u("option",{key:D,value:D},r(m),9,je))),128))],40,Le)]),a.email!==M.value?(i(),v(e(f),{key:0,variant:"outline",size:"sm",onClick:m=>te(a),class:"text-red-600 hover:text-red-700 hover:bg-red-50"},{default:n(()=>[s(e(J),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):(i(),u("div",ze))])]))),128)),o.members.length===0?(i(),u("div",Be," No team members found. ")):g("",!0)])]),_:1})]),_:1}),o.pendingInvitations.length>0?(i(),v(e(E),{key:1},{default:n(()=>[s(e(j),null,{default:n(()=>[s(e(z),{class:"flex items-center gap-2"},{default:n(()=>[s(e(G),{class:"w-5 h-5"}),d(" Pending Invitations ("+r(o.pendingInvitations.length)+") ",1)]),_:1}),s(e(L),null,{default:n(()=>t[13]||(t[13]=[d(" Invitations that have been sent but not yet accepted ")])),_:1,__:[13]})]),_:1}),s(e(V),null,{default:n(()=>[l("div",Fe,[(i(!0),u(b,null,w(o.pendingInvitations,a=>(i(),u("div",{key:a.id,class:"flex items-center justify-between p-4 border rounded-lg bg-yellow-50 border-yellow-200"},[l("div",Ae,[l("div",Ne,[s(e(G),{class:"w-5 h-5 text-yellow-600"}),l("div",null,[l("h3",qe,r(a.email),1),l("p",Pe," Invited by "+r(a.invited_by)+" â€¢ Role: "+r(a.role),1),l("p",He," Expires "+r(T(a.expires_at)),1)])])]),l("div",Je,[s(e(f),{variant:"outline",size:"sm",onClick:m=>R(a.invitation_url,`invitation-${a.id}`),class:"text-blue-600 hover:text-blue-700 hover:bg-blue-50"},{default:n(()=>[p.value.has(`invitation-${a.id}`)?(i(),v(e(U),{key:0,class:"w-4 h-4 text-green-600"})):(i(),v(e(K),{key:1,class:"w-4 h-4"})),d(" "+r(p.value.has(`invitation-${a.id}`)?"Copied!":"Copy Link"),1)]),_:2},1032,["onClick"]),s(e(f),{variant:"outline",size:"sm",onClick:m=>ee(a.id),class:"text-red-600 hover:text-red-700 hover:bg-red-50"},{default:n(()=>[s(e(J),{class:"w-4 h-4"}),t[14]||(t[14]=d(" Cancel "))]),_:2,__:[14]},1032,["onClick"])])]))),128))])]),_:1})]),_:1})):g("",!0),s(e(F),{open:y.value,"onUpdate:open":t[5]||(t[5]=a=>y.value=a)},{default:n(()=>[s(e(A),{class:"sm:max-w-md"},{default:n(()=>[s(e(P),{class:"space-y-3"},{default:n(()=>[s(e(N),null,{default:n(()=>t[15]||(t[15]=[d("Invite Team Member")])),_:1,__:[15]}),s(e(q),null,{default:n(()=>[d(" Send an invitation to join "+r(o.team.name)+". They will receive an email with instructions to create their account. ",1)]),_:1})]),_:1}),l("div",Ge,[l("form",{onSubmit:de(Y,["prevent"]),class:"space-y-6"},[l("div",null,[s(e(B),{for:"email"},{default:n(()=>t[16]||(t[16]=[d("Email Address")])),_:1,__:[16]}),s(e(fe),{id:"email",modelValue:e(c).email,"onUpdate:modelValue":t[2]||(t[2]=a=>e(c).email=a),type:"email",placeholder:"Enter email address",required:"",disabled:e(c).processing,class:"mt-2"},null,8,["modelValue","disabled"]),e(c).errors.email?(i(),u("div",Ke,r(e(c).errors.email),1)):g("",!0)]),l("div",null,[s(e(B),{for:"role"},{default:n(()=>t[17]||(t[17]=[d("Role")])),_:1,__:[17]}),l("div",Oe,[ue(l("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>e(c).role=a),required:"",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[18]||(t[18]=l("option",{value:"",disabled:""},"Select a role",-1)),(i(!0),u(b,null,w(o.availableRoles,(a,m)=>(i(),u("option",{key:m,value:m},r(a),9,Qe))),128))],512),[[me,e(c).role]])]),e(c).errors.role?(i(),u("div",We,r(e(c).errors.role),1)):g("",!0)]),s(e(H),{class:"pt-4"},{default:n(()=>[s(e(f),{type:"button",variant:"outline",onClick:t[4]||(t[4]=a=>y.value=!1)},{default:n(()=>t[19]||(t[19]=[d(" Cancel ")])),_:1,__:[19]}),s(e(f),{type:"submit",disabled:e(c).processing},{default:n(()=>[d(r(e(c).processing?"Sending...":"Send Invitation"),1)]),_:1},8,["disabled"])]),_:1})],32)])]),_:1})]),_:1},8,["open"]),s(e(F),{open:h.value,"onUpdate:open":t[7]||(t[7]=a=>h.value=a)},{default:n(()=>[s(e(A),{class:"sm:max-w-md"},{default:n(()=>[s(e(P),null,{default:n(()=>[s(e(N),null,{default:n(()=>t[20]||(t[20]=[d("Remove Team Member")])),_:1,__:[20]}),s(e(q),null,{default:n(()=>{var a;return[d(" Are you sure you want to remove "+r((a=x.value)==null?void 0:a.name)+" from the team? This action cannot be undone. ",1)]}),_:1})]),_:1}),s(e(H),null,{default:n(()=>[s(e(f),{type:"button",variant:"outline",onClick:t[6]||(t[6]=a=>h.value=!1)},{default:n(()=>t[21]||(t[21]=[d(" Cancel ")])),_:1,__:[21]}),s(e(f),{type:"button",variant:"destructive",onClick:se},{default:n(()=>t[22]||(t[22]=[d(" Remove Member ")])),_:1,__:[22]})]),_:1})]),_:1})]),_:1},8,["open"])])]}),_:1})],64))}});export{gt as default};
