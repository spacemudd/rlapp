import{d as R,r as q,x as H,a as m,o as u,b as o,e as a,f as t,u as s,S as L,t as i,h as r,F as b,l as g,m as z,j as U,n as V,i as O,k as y,p as w,v as h}from"./app-dzhYHfQ6.js";import{e as Y}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-BXa7DggV.js";import{c as G,_ as f}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DdsWb3Js.js";import{_ as k,a as D,b as P,c as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-b-trmVe4.js";import{_ as J}from"./CardDescription.vue_vue_type_script_setup_true_lang-BHp0wru-.js";import{d as K,a as Z,b as Q,c as W,_ as X}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BJiuQUbd.js";import{A as tt}from"./arrow-left-Bt2z0iwT.js";import{D as et}from"./download-D6PiIzrh.js";import{D as st}from"./dollar-sign-CBcnLXsd.js";import{f as T}from"./format-Bw_hER4B.js";import"./useForwardExpose-CSgtMcpZ.js";import"./RovingFocusGroup-DiTamV0A.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=G("PrinterIcon",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),nt={class:"container mx-auto p-6 max-w-7xl"},lt={class:"flex items-center justify-between mb-8"},ot={class:"flex items-center gap-4"},it={class:"text-2xl font-semibold"},at={class:"flex items-center gap-3"},dt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ut={class:"text-gray-500"},rt={key:0,class:"text-gray-500"},mt={key:1,class:"text-gray-500 mt-1"},pt={class:"text-gray-500"},ft={class:"grid grid-cols-2 gap-4"},ct={class:"grid grid-cols-2 gap-4"},yt={class:"space-y-6"},vt={class:"w-full"},_t={class:"divide-y"},bt={class:"py-2 text-sm"},xt={class:"py-2 text-sm text-right"},gt={class:"py-2 text-sm text-right"},wt={class:"py-2 text-sm text-right"},ht={class:"space-y-2 pt-4 border-t"},kt={class:"flex justify-between text-sm"},Dt={class:"flex justify-between text-sm"},Pt={class:"flex justify-between text-sm"},Ct={class:"font-medium"},St={class:"flex justify-between text-sm"},$t={class:"flex justify-between text-sm font-medium pt-2 border-t"},At={key:0},Mt={class:"w-full text-sm"},Ut={class:"py-3 px-4"},Vt={class:"py-3 px-4"},Tt={class:"py-3 px-4"},Nt={class:"py-3 px-4"},jt={class:"py-3 px-4"},Ft={class:"py-3 px-4"},It={class:"py-3 px-4"},Bt={class:"py-3 px-4"},Et={key:1,class:"text-gray-500 py-4 text-center"},Rt={class:"flex justify-end gap-2 mt-4"},Xt=R({__name:"Show",props:{invoice:{}},setup(j){const x=j,S=[{value:"unpaid",label:"Unpaid",color:"text-red-500"},{value:"paid",label:"Paid",color:"text-green-500"},{value:"partial",label:"Partial Paid",color:"text-yellow-500"}],$=l=>{var e;return((e=S.find(n=>n.value===l))==null?void 0:e.color)||"text-gray-500"},p=l=>{const e=["USD","EUR","AED","GBP","JPY","CAD","AUD","CHF","CNY","SEK","NZD"];let n=x.invoice.currency;e.includes(n.toUpperCase())||(n="AED");try{return new Intl.NumberFormat("en-US",{style:"currency",currency:n}).format(l)}catch{return`${n} ${l.toFixed(2)}`}},v=l=>T(new Date(l),"MMM dd, yyyy HH:mm");function F(){window.open(`/invoices/${x.invoice.id}/pdf`,"_blank")}function A(l){window.open(`/payments/${l}/receipt`,"_blank")}const _=q(!1),d=H({amount:"",payment_method:"",payment_date:T(new Date,"yyyy-MM-dd"),status:"completed",notes:"",transaction_type:"payment"});function I(){_.value=!0}function M(){_.value=!1,d.reset()}function B(){d.post(route("payments.store",{invoice:x.invoice.id}),{onSuccess:()=>{M()}})}function E(l){return l==="deposit"?"Security Deposit":l==="refund"?"Refund":"Payment"}return(l,e)=>(u(),m(b,null,[o(Y,null,{default:a(()=>[t("div",nt,[t("div",lt,[t("div",ot,[o(s(f),{variant:"ghost",size:"icon","as-child":"",class:"hover:bg-gray-100"},{default:a(()=>[o(s(L),{href:l.route("invoices")},{default:a(()=>[o(s(tt),{class:"h-5 w-5"})]),_:1},8,["href"])]),_:1}),t("div",null,[t("h1",it,"Invoice #"+i(l.invoice.invoice_number),1),e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 mt-1"},"View invoice details",-1))])]),t("div",at,[o(s(f),{variant:"outline",class:"flex items-center gap-2",onClick:F},{default:a(()=>[o(s(et),{class:"h-4 w-4"}),e[8]||(e[8]=r(" Download PDF "))]),_:1,__:[8]}),(u(!0),m(b,null,g(l.invoice.payments,n=>(u(),z(s(f),{variant:"outline",class:"flex items-center gap-2",onClick:c=>A(n.id),key:n.id},{default:a(()=>[o(s(N),{class:"h-4 w-4"}),e[9]||(e[9]=r(" Print Receipt "))]),_:2,__:[9]},1032,["onClick"]))),128)),o(s(f),{class:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",onClick:I},{default:a(()=>[o(s(st),{class:"h-4 w-4"}),e[10]||(e[10]=r(" Add Payment "))]),_:1,__:[10]})])]),t("div",dt,[o(s(k),null,{default:a(()=>[o(s(D),null,{default:a(()=>[o(s(P),null,{default:a(()=>e[11]||(e[11]=[r("Basic Information")])),_:1,__:[11]})]),_:1}),o(s(C),{class:"space-y-6"},{default:a(()=>{var n;return[t("div",null,[e[12]||(e[12]=t("h3",{class:"font-medium mb-2"},"Customer",-1)),t("p",null,i(l.invoice.customer.name),1),t("p",ut,i(l.invoice.customer.email),1),l.invoice.customer.phone?(u(),m("p",rt,i(l.invoice.customer.phone),1)):U("",!0),l.invoice.customer.address?(u(),m("p",mt,i(l.invoice.customer.address),1)):U("",!0)]),t("div",null,[e[13]||(e[13]=t("h3",{class:"font-medium mb-2"},"Vehicle",-1)),t("p",null,i(l.invoice.vehicle.make)+" "+i(l.invoice.vehicle.model),1),t("p",pt,"Plate: "+i(l.invoice.vehicle.plate_number),1)]),t("div",ft,[t("div",null,[e[14]||(e[14]=t("h3",{class:"font-medium mb-2"},"Invoice Date",-1)),t("p",null,i(v(l.invoice.invoice_date)),1)]),t("div",null,[e[15]||(e[15]=t("h3",{class:"font-medium mb-2"},"Due Date",-1)),t("p",null,i(v(l.invoice.due_date)),1)])]),t("div",ct,[t("div",null,[e[16]||(e[16]=t("h3",{class:"font-medium mb-2"},"Start Date",-1)),t("p",null,i(v(l.invoice.start_datetime)),1)]),t("div",null,[e[17]||(e[17]=t("h3",{class:"font-medium mb-2"},"End Date",-1)),t("p",null,i(v(l.invoice.end_datetime)),1)])]),t("div",null,[e[18]||(e[18]=t("h3",{class:"font-medium mb-2"},"Status",-1)),t("p",{class:V(["font-medium",$(l.invoice.status)])},i((n=S.find(c=>c.value===l.invoice.status))==null?void 0:n.label),3)])]}),_:1})]),_:1}),o(s(k),null,{default:a(()=>[o(s(D),null,{default:a(()=>[o(s(P),null,{default:a(()=>e[19]||(e[19]=[r("Invoice Items")])),_:1,__:[19]})]),_:1}),o(s(C),null,{default:a(()=>[t("div",yt,[t("table",vt,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"text-left py-2 text-sm font-medium text-gray-500"},"Description"),t("th",{class:"text-right py-2 text-sm font-medium text-gray-500"},"Amount"),t("th",{class:"text-right py-2 text-sm font-medium text-gray-500"},"Discount"),t("th",{class:"text-right py-2 text-sm font-medium text-gray-500"},"Total")])],-1)),t("tbody",_t,[(u(!0),m(b,null,g(l.invoice.items,(n,c)=>(u(),m("tr",{key:c},[t("td",bt,i(n.description),1),t("td",xt,i(p(n.amount)),1),t("td",gt,i(p(n.discount)),1),t("td",wt,i(p(n.amount-n.discount)),1)]))),128))])]),t("div",ht,[t("div",kt,[e[21]||(e[21]=t("span",{class:"text-gray-500"},"Sub Total",-1)),t("span",null,i(p(l.invoice.sub_total)),1)]),t("div",Dt,[e[22]||(e[22]=t("span",{class:"text-gray-500"},"Total Discount",-1)),t("span",null,i(p(l.invoice.total_discount)),1)]),t("div",Pt,[e[23]||(e[23]=t("span",{class:"text-gray-500"},"Total Amount",-1)),t("span",Ct,i(p(l.invoice.total_amount)),1)]),t("div",St,[e[24]||(e[24]=t("span",{class:"text-gray-500"},"Paid Amount",-1)),t("span",null,i(p(l.invoice.paid_amount)),1)]),t("div",$t,[e[25]||(e[25]=t("span",null,"Remaining Amount",-1)),t("span",{class:V($(l.invoice.status))},i(p(l.invoice.remaining_amount)),3)])])])]),_:1})]),_:1})]),o(s(k),{class:"mt-8"},{default:a(()=>[o(s(D),null,{default:a(()=>[o(s(P),null,{default:a(()=>e[26]||(e[26]=[r("Payment History")])),_:1,__:[26]}),o(s(J),null,{default:a(()=>e[27]||(e[27]=[r("All payments made for this invoice.")])),_:1,__:[27]})]),_:1}),o(s(C),null,{default:a(()=>[l.invoice.payments&&l.invoice.payments.length>0?(u(),m("div",At,[t("table",Mt,[e[28]||(e[28]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"py-2 text-left"},"Date"),t("th",{class:"py-2 text-left"},"Method"),t("th",{class:"py-2 text-left"},"Reference"),t("th",{class:"py-2 text-right"},"Amount"),t("th",{class:"py-2 text-center"},"Status"),t("th",{class:"py-2 text-left"},"Type"),t("th",{class:"py-2 text-left"},"Notes"),t("th",{class:"py-2 text-right"},"Actions")])],-1)),t("tbody",null,[(u(!0),m(b,null,g(l.invoice.payments,n=>(u(),m("tr",{key:n.id,class:"border-b"},[t("td",Ut,i(v(n.payment_date)),1),t("td",Vt,i(n.payment_method),1),t("td",Tt,i(n.reference_number||"-"),1),t("td",Nt,i(p(n.amount)),1),t("td",jt,i(n.status),1),t("td",Ft,i(E(n.transaction_type)),1),t("td",It,i(n.notes||"-"),1),t("td",Bt,[o(s(f),{variant:"ghost",size:"icon",onClick:c=>A(n.id)},{default:a(()=>[o(s(N),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]))),128))])])])):(u(),m("div",Et,"No payments found for this invoice."))]),_:1})]),_:1})])]),_:1}),o(s(X),{open:_.value,"onUpdate:open":e[6]||(e[6]=n=>_.value=n)},{default:a(()=>[o(s(K)),o(s(Z),{class:"max-w-md w-full"},{default:a(()=>[o(s(Q),null,{default:a(()=>e[29]||(e[29]=[r("Add Payment")])),_:1,__:[29]}),o(s(W),null,{default:a(()=>e[30]||(e[30]=[r("Enter payment details for this invoice.")])),_:1,__:[30]}),t("form",{onSubmit:O(B,["prevent"]),class:"space-y-4 mt-4"},[t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium mb-1"},"Amount",-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>s(d).amount=n),type:"number",min:"0",step:"0.01",class:"input w-full",required:""},null,512),[[w,s(d).amount]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium mb-1"},"Payment Method",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=n=>s(d).payment_method=n),class:"input w-full",required:""},e[32]||(e[32]=[t("option",{value:""},"Select method",-1),t("option",{value:"cash"},"Cash",-1),t("option",{value:"credit_card"},"Credit Card",-1),t("option",{value:"bank_transfer"},"Bank Transfer",-1),t("option",{value:"other"},"Other",-1)]),512),[[h,s(d).payment_method]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium mb-1"},"Payment Date",-1)),y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>s(d).payment_date=n),type:"date",class:"input w-full",required:""},null,512),[[w,s(d).payment_date]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium mb-1"},"Status",-1)),y(t("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>s(d).status=n),class:"input w-full",required:""},e[35]||(e[35]=[t("option",{value:"completed"},"Completed",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"failed"},"Failed",-1)]),512),[[h,s(d).status]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium mb-1"},"Transaction Type",-1)),y(t("select",{"onUpdate:modelValue":e[4]||(e[4]=n=>s(d).transaction_type=n),class:"input w-full",required:""},e[37]||(e[37]=[t("option",{value:"payment"},"Payment",-1),t("option",{value:"deposit"},"Security Deposit",-1),t("option",{value:"refund"},"Refund",-1)]),512),[[h,s(d).transaction_type]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium mb-1"},"Notes",-1)),y(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=n=>s(d).notes=n),class:"input w-full",rows:"2"},null,512),[[w,s(d).notes]])]),t("div",Rt,[o(s(f),{type:"button",variant:"outline",onClick:M},{default:a(()=>e[40]||(e[40]=[r("Cancel")])),_:1,__:[40]}),o(s(f),{type:"submit",disabled:s(d).processing},{default:a(()=>e[41]||(e[41]=[r("Save Payment")])),_:1,__:[41]},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"])],64))}});export{Xt as default};
