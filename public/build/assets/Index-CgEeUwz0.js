import{y as I,C as H,r as D,z as M,J as y,c,o as n,d as o,u as t,B as z,w as l,a as s,g as u,t as i,S as _,e as d,h as R,i as G,F as x,l as A,b as m,n as b}from"./app-b8XJRdzs.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bi958crH.js";import{_ as E}from"./Card.vue_vue_type_script_setup_true_lang-Xmz3efc3.js";import{_ as T}from"./CardContent.vue_vue_type_script_setup_true_lang-DbWc4gCn.js";import{_ as Y,a as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-NhLmzeXw.js";import{_ as w}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-sqSvxu1x.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-BEMrVEMA.js";import{_ as O}from"./Badge.vue_vue_type_script_setup_true_lang-BKs4tWQ1.js";import{_ as X,a as Z,b as Q,c as f,R as W,F as ee}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-BiWPMEjH.js";import{P as V}from"./plus-DWUfR-QR.js";import{S as te}from"./search-CnR06Y43.js";import{E as se}from"./ellipsis-vertical-CZrSGMmy.js";import{E as ae}from"./eye-DakIMuns.js";import{S as re}from"./square-pen-Ciod8OXW.js";import{P as oe,C as le}from"./play-DO7xYimI.js";import{C as ie}from"./circle-check-big-DtYca8lG.js";import{T as ne}from"./trash-2-B4kfQFfU.js";import"./useForwardExpose-BelQI3mm.js";import"./RovingFocusGroup-BCQs797K.js";const de={class:"p-6 sm:p-8 max-w-7xl mx-auto"},ue={class:"space-y-6"},ce={class:"flex items-center justify-between"},me={class:"text-2xl font-semibold text-gray-900"},fe={class:"text-gray-600 mt-1"},_e={class:"flex flex-col sm:flex-row gap-4"},pe={class:"flex-1"},ve={class:"relative"},ye={class:"w-full sm:w-48"},he={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 relative"},ge={class:"flex items-start justify-between"},xe={class:"space-y-1"},be={class:"text-sm font-medium text-gray-900"},we={class:"text-sm text-gray-500"},Ce={class:"text-sm font-medium text-gray-900"},ke={class:"text-sm text-gray-500"},Se={class:"grid grid-cols-2 gap-4 text-sm"},$e={class:"font-medium"},De={class:"font-medium"},Ae={class:"pt-3 border-t"},Ee={class:"flex justify-between items-center"},Te={class:"font-semibold text-lg"},Ve={class:"flex justify-between items-center mt-1"},Pe={class:"text-xs text-gray-400"},Be={key:0,class:"text-xs text-green-600"},Fe={key:0,class:"text-center py-12"},Ne={key:1,class:"flex justify-center"},Ue={class:"flex items-center space-x-2"},je=["innerHTML"],at=I({__name:"Index",props:{contracts:{},filters:{}},setup(P){const C=P,{t:h}=H(),p=D(C.filters.search||""),v=D(C.filters.status||"all"),B=r=>{switch(r){case"draft":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"active":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"void":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},k=(r,a="AED")=>{["USD","EUR","AED","GBP","JPY","CAD","AUD","CHF","CNY","SEK","NZD"].includes(a.toUpperCase())||(a="AED");try{return new Intl.NumberFormat("en-AE",{style:"currency",currency:a,minimumFractionDigits:2}).format(r)}catch{return`${a} ${r.toFixed(2)}`}},S=r=>new Date(r).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});let $;M([p,v],()=>{clearTimeout($),$=setTimeout(()=>{const r=new URLSearchParams;p.value&&r.set("search",p.value),v.value!=="all"&&r.set("status",v.value),y.get(route("contracts.index"),Object.fromEntries(r),{preserveState:!0,preserveScroll:!0})},300)});const F=r=>{confirm(`Are you sure you want to delete contract ${r.contract_number}?`)&&y.delete(route("contracts.destroy",r.id),{preserveScroll:!0})},N=r=>{confirm(`Are you sure you want to activate contract ${r.contract_number}?`)&&y.patch(route("contracts.activate",r.id),{},{preserveScroll:!0})},U=r=>{confirm(`Are you sure you want to complete contract ${r.contract_number}?`)&&y.patch(route("contracts.complete",r.id),{},{preserveScroll:!0})},j=r=>{const a=prompt("Please provide a reason for voiding this contract:");a&&y.patch(route("contracts.void",r.id),{void_reason:a},{preserveScroll:!0})};function L(r){window.location.href=route("invoices.create",{contract_id:r.id})}return(r,a)=>(n(),c(x,null,[o(t(z),{title:t(h)("contracts")},null,8,["title"]),o(J,null,{default:l(()=>[s("div",de,[s("div",ue,[s("div",ce,[s("div",null,[s("h1",me,i(t(h)("contracts")),1),s("p",fe,i(t(h)("manage_contracts")),1)]),o(t(_),{href:r.route("contracts.create")},{default:l(()=>[o(t(w),null,{default:l(()=>[o(t(V),{class:"w-4 h-4 mr-2"}),d(" "+i(t(h)("new_contract")),1)]),_:1})]),_:1},8,["href"])]),o(t(E),null,{default:l(()=>[o(t(T),{class:"pt-6"},{default:l(()=>[s("div",_e,[s("div",pe,[s("div",ve,[o(t(te),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),o(t(K),{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),placeholder:"Search contracts, customers, or vehicles...",class:"pl-10"},null,8,["modelValue"])])]),s("div",ye,[R(s("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),class:"flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50"},a[2]||(a[2]=[s("option",{value:"all"},"All Status",-1),s("option",{value:"draft"},"Draft",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"completed"},"Completed",-1),s("option",{value:"void"},"Void",-1)]),512),[[G,v.value]])])])]),_:1})]),_:1}),s("div",he,[(n(!0),c(x,null,A(r.contracts.data,e=>(n(),m(t(E),{key:e.id,class:"hover:shadow-md transition-shadow"},{default:l(()=>[o(t(Y),{class:"pb-3"},{default:l(()=>[s("div",ge,[s("div",xe,[o(t(_),{href:r.route("contracts.show",e.id),class:"hover:underline"},{default:l(()=>[o(t(q),{class:"text-lg"},{default:l(()=>[d(i(e.contract_number),1)]),_:2},1024)]),_:2},1032,["href"]),o(t(O),{class:b([B(e.status),"text-xs"])},{default:l(()=>[d(i(e.status.charAt(0).toUpperCase()+e.status.slice(1)),1)]),_:2},1032,["class"])]),o(t(X),null,{default:l(()=>[o(t(Z),{"as-child":""},{default:l(()=>[o(t(w),{variant:"ghost",size:"sm"},{default:l(()=>[o(t(se),{class:"w-4 h-4"})]),_:1})]),_:1}),o(t(Q),{align:"end",class:"z-50"},{default:l(()=>[o(t(f),{"as-child":""},{default:l(()=>[o(t(_),{href:r.route("contracts.show",e.id)},{default:l(()=>[o(t(ae),{class:"w-4 h-4 mr-2"}),a[3]||(a[3]=d(" View Details "))]),_:2,__:[3]},1032,["href"])]),_:2},1024),e.status==="draft"?(n(),m(t(f),{key:0,"as-child":""},{default:l(()=>[o(t(_),{href:r.route("contracts.edit",e.id)},{default:l(()=>[o(t(re),{class:"w-4 h-4 mr-2"}),a[4]||(a[4]=d(" Edit "))]),_:2,__:[4]},1032,["href"])]),_:2},1024)):u("",!0),e.status==="draft"?(n(),m(t(f),{key:1,onClick:g=>N(e)},{default:l(()=>[o(t(oe),{class:"w-4 h-4 mr-2"}),a[5]||(a[5]=d(" Activate "))]),_:2,__:[5]},1032,["onClick"])):u("",!0),e.status==="active"?(n(),m(t(f),{key:2,onClick:g=>U(e)},{default:l(()=>[o(t(ie),{class:"w-4 h-4 mr-2"}),a[6]||(a[6]=d(" Complete "))]),_:2,__:[6]},1032,["onClick"])):u("",!0),["draft","active"].includes(e.status)?(n(),m(t(f),{key:3,onClick:g=>j(e)},{default:l(()=>[o(t(le),{class:"w-4 h-4 mr-2"}),a[7]||(a[7]=d(" Void "))]),_:2,__:[7]},1032,["onClick"])):u("",!0),!e.invoice_id&&e.status!=="void"?(n(),m(t(f),{key:4,onClick:()=>L(e)},{default:l(()=>[o(t(W),{class:"w-4 h-4 mr-2"}),a[8]||(a[8]=d(" Create Invoice "))]),_:2,__:[8]},1032,["onClick"])):u("",!0),e.status==="draft"?(n(),m(t(f),{key:5,onClick:g=>F(e),class:"text-red-600"},{default:l(()=>[o(t(ne),{class:"w-4 h-4 mr-2"}),a[9]||(a[9]=d(" Delete "))]),_:2,__:[9]},1032,["onClick"])):u("",!0)]),_:2},1024)]),_:2},1024)])]),_:2},1024),o(t(T),{class:"space-y-4"},{default:l(()=>[s("div",null,[s("p",be,i(e.customer.first_name)+" "+i(e.customer.last_name),1),s("p",we,i(e.customer.email),1)]),s("div",null,[s("p",Ce,i(e.vehicle.year)+" "+i(e.vehicle.make)+" "+i(e.vehicle.model),1),s("p",ke,i(e.vehicle.plate_number),1)]),s("div",Se,[s("div",null,[a[10]||(a[10]=s("p",{class:"text-gray-500"},"Start Date",-1)),s("p",$e,i(S(e.start_date)),1)]),s("div",null,[a[11]||(a[11]=s("p",{class:"text-gray-500"},"End Date",-1)),s("p",De,i(S(e.end_date)),1)])]),s("div",Ae,[s("div",Ee,[a[12]||(a[12]=s("span",{class:"text-sm text-gray-500"},"Total Amount",-1)),s("span",Te,i(k(e.total_amount,e.currency)),1)]),s("div",Ve,[s("span",Pe,i(e.total_days)+" days Ã— "+i(k(e.daily_rate,e.currency)),1),e.invoice_id?(n(),c("span",Be,"Invoice Created")):u("",!0)])])]),_:2},1024)]),_:2},1024))),128))]),r.contracts.data.length===0?(n(),c("div",Fe,[o(t(ee),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a[14]||(a[14]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No contracts found",-1)),a[15]||(a[15]=s("p",{class:"text-gray-500 mb-6"},"Get started by creating your first rental contract.",-1)),o(t(_),{href:r.route("contracts.create")},{default:l(()=>[o(t(w),null,{default:l(()=>[o(t(V),{class:"w-4 h-4 mr-2"}),a[13]||(a[13]=d(" Create Contract "))]),_:1,__:[13]})]),_:1},8,["href"])])):u("",!0),r.contracts.links&&r.contracts.data.length>0?(n(),c("div",Ne,[s("nav",Ue,[(n(!0),c(x,null,A(r.contracts.links,e=>(n(),c(x,{key:e.label},[e.url?(n(),m(t(_),{key:0,href:e.url,class:b(["px-3 py-2 text-sm rounded-md",e.active?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"]),innerHTML:e.label},null,8,["href","class","innerHTML"])):(n(),c("span",{key:1,class:b(["px-3 py-2 text-sm rounded-md text-gray-400 cursor-not-allowed"]),innerHTML:e.label},null,8,je))],64))),128))])])):u("",!0)])])]),_:1})],64))}});export{at as default};
