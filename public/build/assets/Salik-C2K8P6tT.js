import{r as d,p as k,A as B,b as M,o,w as F,a as t,c as n,g as x,n as m,e as b,t as s,h as D,v as T,F as y,l as _}from"./app-b8XJRdzs.js";import{e as E}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-BiWPMEjH.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-sqSvxu1x.js";import"./useForwardExpose-BelQI3mm.js";import"./RovingFocusGroup-BCQs797K.js";const j={class:"p-8"},I={class:"flex w-full"},S={class:"flex-1"},V={class:"flex items-center border-b border-gray-200 w-full"},z={key:0,class:"ml-2 inline-flex items-center justify-center rounded-full bg-black text-white text-xs font-bold w-7 h-7"},G={class:"ml-2 inline-flex items-center justify-center rounded-full bg-[#b71c1c] text-white text-xs font-bold w-7 h-7"},L={class:"flex gap-4 mb-4 items-end mt-8"},$={key:0,class:"mt-8 w-full"},O={class:"rounded-lg shadow w-full"},R={class:"table-auto w-full bg-white text-sm"},U={class:"px-2 py-1"},H={class:"px-2 py-1"},q={class:"px-2 py-1"},K={class:"px-2 py-1"},Q={class:"px-2 py-1"},W={class:"px-2 py-1 font-bold text-right"},X={key:0,class:"mt-4 text-right"},Y={class:"font-bold text-lg text-blue-700"},Z={key:1,class:"mt-16 space-y-8"},tt={class:"bg-gray-200 border p-6 flex flex-col items-center justify-center min-w-[220px] mb-4 md:mb-0"},et={class:"text-3xl font-bold"},lt={class:"text-lg text-gray-700"},st={class:"flex-1 grid grid-cols-2 gap-x-8 gap-y-2"},at={class:"font-bold text-lg"},ot={class:"font-bold text-lg"},nt={class:"font-bold text-lg"},rt={class:"font-bold text-lg"},it={class:"font-bold text-lg"},dt={class:"font-bold text-lg"},pt={key:2,class:"mt-16"},ut={class:"overflow-x-auto rounded-lg shadow"},ct={class:"min-w-full bg-white"},xt={class:"px-4 py-2 font-bold"},bt={class:"px-4 py-2"},gt={class:"px-4 py-2"},ft={class:"bg-white border px-3 py-1 rounded font-bold text-lg"},vt={class:"px-4 py-2"},mt={class:"px-4 py-2"},yt={class:"px-4 py-2 font-bold text-lg"},_t={class:"px-4 py-2 font-bold text-lg"},ht={class:"balance-widget text-right min-w-[220px]"},kt={class:"text-[40px] font-bold text-[#9fd0e3] leading-none"},Jt={__name:"Salik",setup(Dt){const g=d(null),f=d(!0),i=d("toll"),w=async()=>{f.value=!0;try{const e=await(await fetch("/api/salik-balance")).json();g.value=e.balance}catch{g.value=null}f.value=!1},p=d([]),A=async()=>{try{const e=await(await fetch("/api/salik-trips")).json();p.value=e.map(l=>({trip_date:l.trip_date||"",trip_time:l.trip_time||"",plate:l.plate||"",toll_gate:l.toll_gate||"",direction:l.direction||"",amount:l.amount||""}))}catch{p.value=[]}},h=d([{plateNumber:"J 93820",plateType:"Dubai, Private",tripDate:"08 Jul 2025",tripTime:"10:47:03 PM",tollGate:"Al Garhoud New Bridge",transactionId:"80550486960",rechargeBefore:"15 Jul 2025 10:59:59 PM",amount:"4.00"},{plateNumber:"J 93820",plateType:"Dubai, Private",tripDate:"08 Jul 2025",tripTime:"10:41:25 PM",tollGate:"Al Safa North",transactionId:"90750486654",rechargeBefore:"15 Jul 2025 10:59:59 PM",amount:"4.00"}]),P=d([{date:"09 Jul 2025",duration:"5 Hrs",plate:"DD 81392",location:"Dubai Mall",zone:"Fashion",amount:"20.00",pending:"20.00"}]),u=d(""),c=d("");function C(a){if(!a)return null;const[e,l,r]=a.split(" "),N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return new Date(+r,N.indexOf(l),+e)}const v=k(()=>p.value.filter(a=>{let e=!0;if(u.value){const l=new Date(u.value),r=C(a.trip_date);r&&(e=e&&r>=l)}if(c.value){const l=c.value.replace(/\s+/g,"").toLowerCase(),r=a.plate.replace(/\s+/g,"").toLowerCase();e=e&&r.includes(l)}return e})),J=k(()=>v.value.reduce((a,e)=>a+parseFloat(e.amount||0),0).toFixed(2));return B(()=>{w(),A()}),(a,e)=>(o(),M(E,{breadcrumbs:[{title:"Traffic violations",href:"/traffic-violations"},{title:"Salik",href:"/traffic-violations/salik"}]},{default:F(()=>[t("div",j,[t("div",I,[t("div",S,[t("div",V,[t("button",{class:m(["px-6 py-2 font-bold text-black border-b-4 flex items-center",i.value==="toll"?"border-black bg-white":"border-transparent bg-transparent"]),style:{"border-radius":"8px 8px 0 0"},onClick:e[0]||(e[0]=l=>i.value="toll")},[e[5]||(e[5]=b(" Toll Trips ")),p.value.length?(o(),n("span",z,s(p.value.length),1)):x("",!0)],2),t("button",{class:m(["flex items-center ml-4 text-lg font-normal focus:outline-none",i.value==="pending"?"font-bold border-b-4 border-black":"text-gray-500 border-b-4 border-transparent"]),style:{"border-radius":"8px 8px 0 0"},onClick:e[1]||(e[1]=l=>i.value="pending")},[e[6]||(e[6]=b(" Pending Toll Trips ")),t("span",G,s(h.value.length),1)],2),t("button",{class:m(["flex items-center ml-4 text-lg font-normal focus:outline-none",i.value==="parking"?"font-bold border-b-4 border-black":"text-gray-500 border-b-4 border-transparent"]),style:{"border-radius":"8px 8px 0 0"},onClick:e[2]||(e[2]=l=>i.value="parking")},e[7]||(e[7]=[b(" Parking "),t("span",{class:"ml-2 inline-flex items-center justify-center rounded-full bg-[#b71c1c] text-white text-xs font-bold w-7 h-7"}," 3 ",-1)]),2)]),t("div",L,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-xs mb-1"},"From Date",-1)),D(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=l=>u.value=l),class:"border rounded px-2 py-1"},null,512),[[T,u.value]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-xs mb-1"},"Plate Number",-1)),D(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l),placeholder:"e.g. CC 30529",class:"border rounded px-2 py-1"},null,512),[[T,c.value]])])]),i.value==="toll"?(o(),n("div",$,[t("div",O,[t("table",R,[e[10]||(e[10]=t("thead",null,[t("tr",{class:"bg-gray-100 text-gray-700 text-left"},[t("th",{class:"px-2 py-2"},"Trip Date"),t("th",{class:"px-2 py-2"},"Trip Time"),t("th",{class:"px-2 py-2"},"Plate"),t("th",{class:"px-2 py-2"},"Toll gate"),t("th",{class:"px-2 py-2"},"Direction"),t("th",{class:"px-2 py-2"},"Amount (AED)")])],-1)),t("tbody",null,[(o(!0),n(y,null,_(v.value,(l,r)=>(o(),n("tr",{key:r,class:"border-b hover:bg-gray-50"},[t("td",U,s(l.trip_date),1),t("td",H,s(l.trip_time),1),t("td",q,s(l.plate),1),t("td",K,s(l.toll_gate),1),t("td",Q,s(l.direction),1),t("td",W,s(l.amount),1)]))),128))])])]),(c.value||u.value)&&v.value.length?(o(),n("div",X,[e[11]||(e[11]=t("span",{class:"font-bold text-lg"},"Total amount: ",-1)),t("span",Y,s(J.value)+" AED",1)])):x("",!0)])):x("",!0),i.value==="pending"?(o(),n("div",Z,[(o(!0),n(y,null,_(h.value,l=>(o(),n("div",{key:l.transactionId,class:"bg-gray-100 border-l-4 border-gray-300 p-6 flex flex-col md:flex-row md:items-center md:space-x-8 rounded-lg shadow-sm"},[t("div",tt,[e[12]||(e[12]=t("div",{class:"text-lg text-gray-600 mb-2"},"Plate details",-1)),t("div",et,s(l.plateNumber),1),t("div",lt,s(l.plateType),1)]),t("div",st,[t("div",null,[e[13]||(e[13]=t("div",{class:"text-gray-500"},"Trip date",-1)),t("div",at,s(l.tripDate),1)]),t("div",null,[e[14]||(e[14]=t("div",{class:"text-gray-500"},"Trip time",-1)),t("div",ot,s(l.tripTime),1)]),t("div",null,[e[15]||(e[15]=t("div",{class:"text-gray-500"},"Toll gate",-1)),t("div",nt,s(l.tollGate),1)]),t("div",null,[e[16]||(e[16]=t("div",{class:"text-gray-500"},"Transaction ID",-1)),t("div",rt,s(l.transactionId),1)]),t("div",null,[e[17]||(e[17]=t("div",{class:"text-gray-500"},"Recharge before",-1)),t("div",it,s(l.rechargeBefore),1)]),t("div",null,[e[18]||(e[18]=t("div",{class:"text-gray-500"},"Amount (AED)",-1)),t("div",dt,s(l.amount),1)])])]))),128))])):x("",!0),i.value==="parking"?(o(),n("div",pt,[t("div",ut,[t("table",ct,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"bg-gray-100 text-gray-700 text-left"},[t("th",{class:"px-4 py-3"},"Date"),t("th",{class:"px-4 py-3"},"Duration"),t("th",{class:"px-4 py-3"},"Plate"),t("th",{class:"px-4 py-3"},"Location"),t("th",{class:"px-4 py-3"},"Parking zone"),t("th",{class:"px-4 py-3"},"Amount (AED)"),t("th",{class:"px-4 py-3"},"Pending amount (AED)"),t("th",{class:"px-4 py-3"})])],-1)),t("tbody",null,[(o(!0),n(y,null,_(P.value,(l,r)=>(o(),n("tr",{key:r,class:"bg-orange-100 border-l-4 border-gray-300"},[t("td",xt,s(l.date),1),t("td",bt,s(l.duration),1),t("td",gt,[t("span",ft,s(l.plate),1)]),t("td",vt,s(l.location),1),t("td",mt,s(l.zone),1),t("td",yt,s(l.amount),1),t("td",_t,s(l.pending),1),e[19]||(e[19]=t("td",{class:"px-4 py-2 text-center text-2xl font-bold text-gray-500 cursor-pointer"},"+",-1))]))),128))])])])])):x("",!0)]),t("div",ht,[t("div",kt,[b(s(f.value?"...":g.value??"0.00")+" ",1),e[21]||(e[21]=t("span",{class:"text-[20px] align-top"},"AED",-1))]),e[22]||(e[22]=t("div",{class:"text-[18px] font-bold text-[#9fd0e3] mt-2"}," Available balance ",-1))])])])]),_:1}))}};export{Jt as default};
