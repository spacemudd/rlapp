import{z as K,E as O,r as j,A as W,c as p,o as _,d as s,e,C as X,w as o,a as t,n as l,t as r,b as w,i as b,g as m,F as N,p as I,D as U,f as A}from"./app-CAZ12x1D.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-CWBHZpDB.js";import{_ as y}from"./Card.vue_vue_type_script_setup_true_lang-DkmQYX9C.js";import{_ as $}from"./CardContent.vue_vue_type_script_setup_true_lang-KPstOoDk.js";import{_ as Z}from"./CardDescription.vue_vue_type_script_setup_true_lang-UpzGamUA.js";import{_ as C,a as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-D1qr0NJj.js";import{c as ee,_ as v}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B6CdmlMU.js";import{_ as te}from"./Input.vue_vue_type_script_setup_true_lang-dw5fRfhb.js";import{_ as se,a as re,b as ae,c as le}from"./DialogTitle.vue_vue_type_script_setup_true_lang-D5RZQtnr.js";import{_ as oe}from"./DialogHeader.vue_vue_type_script_setup_true_lang-Bd6aop_R.js";import{_ as ne}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BKWu923I.js";import{_ as ie}from"./CreateCustomerForm.vue_vue_type_script_setup_true_lang-Dh_dV1zZ.js";import{u as ce,U as S}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-C_VWVAbV.js";import{S as L}from"./search-DO-tE4ov.js";import{P as M}from"./plus-C4gS69Cc.js";import{M as de}from"./mail-DpAQnciS.js";import{C as ue}from"./credit-card-UWuwgWfV.js";import{C as me}from"./calendar-CTnGLQ5T.js";import{S as fe}from"./square-pen-wkFwP_LY.js";import"./useForwardExpose-DgE0TLrR.js";import"./RovingFocusGroup-D_a6MLvt.js";import"./Label.vue_vue_type_script_setup_true_lang-DS8JFigu.js";import"./Textarea.vue_vue_type_script_setup_true_lang-DFmsksJ4.js";import"./InputError.vue_vue_type_script_setup_true_lang-Cc2h0Wp4.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=ee("PhoneIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),xe={class:"p-6 sm:p-8 max-w-7xl mx-auto"},pe={class:"space-y-6"},he={class:"text-3xl font-bold tracking-tight"},ge={class:"text-muted-foreground"},ve={class:"relative"},we={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},be={key:0,class:"flex items-center justify-center py-12"},ye={class:"text-center"},$e={class:"mt-4 text-lg font-semibold"},Ce={class:"mt-2 text-sm text-muted-foreground"},ke={key:1,class:"space-y-4"},Se={class:"text-sm text-muted-foreground"},De={class:"rounded-md border"},Pe={class:"w-full"},je={class:"border-b bg-muted/50"},Ne={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},Ue={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},Ve={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},ze={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},Ie={class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground rtl:text-right"},Ae={class:"p-4 align-middle"},Le={class:"font-medium"},Me={class:"text-sm text-muted-foreground"},Re={class:"text-xs text-muted-foreground"},Be={class:"p-4 align-middle"},Te={class:"p-4 align-middle"},Ee={class:"p-4 align-middle"},Fe={class:"p-4 align-middle"},qe={class:"flex items-center gap-2"},Qe={key:1,class:"px-3 py-2 text-sm border rounded-md text-muted-foreground cursor-not-allowed bg-muted/50"},Ge={key:3,class:"px-3 py-2 text-sm border rounded-md text-muted-foreground cursor-not-allowed bg-muted/50"},pt=K({__name:"Customers",props:{customers:{},stats:{},search:{}},setup(R){const c=R,{t:a}=O(),{isRtl:n}=ce(),B=[{title:a("dashboard"),href:"/dashboard"},{title:a("customers"),href:"/customers"}],h=j(!1),x=j(null),d=j(c.search||""),V=()=>{x.value=null,h.value=!0},T=u=>{x.value=u,h.value=!0},E=u=>{x.value?u.put(`/customers/${x.value.id}`,{onSuccess:()=>{h.value=!1,x.value=null}}):u.post("/customers",{onSuccess:()=>{h.value=!1,x.value=null}})},F=()=>{h.value=!1,x.value=null},q=u=>new Date(u).toLocaleDateString(),Q=u=>`${u.first_name} ${u.last_name}`,G=()=>{const u=c.customers.current_page,f=c.customers.last_page,i=[];if(f<=10)for(let g=1;g<=f;g++)i.push(g);else{const g=Math.max(1,u-2),J=Math.min(f,u+2);for(let P=g;P<=J;P++)i.push(P)}return i},H=()=>{const u=new URLSearchParams;d.value.trim()&&u.append("search",d.value.trim());const f=`/customers${u.toString()?"?"+u.toString():""}`;A.get(f,{},{preserveState:!0,preserveScroll:!1})},D=()=>{d.value="",A.get("/customers",{},{preserveState:!0,preserveScroll:!1})};let z;return W(d,(u,f)=>{u!==f&&(clearTimeout(z),z=setTimeout(()=>{H()},500))}),(u,f)=>(_(),p(N,null,[s(e(X),{title:e(a)("customers")},null,8,["title"]),s(Y,{breadcrumbs:B},{default:o(()=>[t("div",xe,[t("div",pe,[t("div",{class:l(["flex items-center justify-between",{"flex-row-reverse":e(n)}])},[t("div",{class:l({"text-right":e(n)})},[t("h1",he,r(e(a)("customers")),1),t("p",ge,r(e(a)("manage_customers")),1)],2),t("div",{class:l(["flex items-center gap-4",{"flex-row-reverse":e(n)}])},[t("div",ve,[s(e(L),{class:l(["absolute top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground",e(n)?"right-3":"left-3"])},null,8,["class"]),s(e(te),{modelValue:d.value,"onUpdate:modelValue":f[0]||(f[0]=i=>d.value=i),placeholder:e(a)("search_customers"),class:l(["w-64",e(n)?"pr-10":"pl-10"])},null,8,["modelValue","placeholder","class"]),d.value?(_(),w(e(v),{key:0,variant:"ghost",size:"sm",class:l(["absolute top-1/2 h-6 w-6 -translate-y-1/2 p-0",e(n)?"left-1":"right-1"]),onClick:D},{default:o(()=>f[2]||(f[2]=[m(" Ã— ")])),_:1,__:[2]},8,["class"])):b("",!0)]),s(e(se),{open:h.value,"onUpdate:open":f[1]||(f[1]=i=>h.value=i)},{default:o(()=>[s(e(ne),{"as-child":""},{default:o(()=>[s(e(v),{onClick:V},{default:o(()=>[s(e(M),{class:l(["h-4 w-4",e(n)?"ml-2":"mr-2"])},null,8,["class"]),m(" "+r(e(a)("add_customer")),1)]),_:1})]),_:1}),s(e(re),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:o(()=>[s(e(oe),null,{default:o(()=>[s(e(ae),null,{default:o(()=>[m(r(x.value?e(a)("edit_customer"):e(a)("add_customer")),1)]),_:1}),s(e(le),null,{default:o(()=>[m(r(x.value?e(a)("update_profile_info"):e(a)("customer_information")),1)]),_:1})]),_:1}),s(ie,{"editing-customer":x.value,onSubmit:E,onCancel:F},null,8,["editing-customer"])]),_:1})]),_:1},8,["open"])],2)],2),t("div",we,[s(e(y),null,{default:o(()=>[s(e(C),{class:l(["flex flex-row items-center justify-between space-y-0 pb-2",{"flex-row-reverse":e(n)}])},{default:o(()=>[s(e(k),{class:l(["text-sm font-medium",{"text-right":e(n)}])},{default:o(()=>[m(r(e(a)("total_customers")),1)]),_:1},8,["class"]),s(e(S),{class:"h-4 w-4 text-muted-foreground"})]),_:1},8,["class"]),s(e($),null,{default:o(()=>[t("div",{class:l(["text-2xl font-bold",{"text-right":e(n)}])},r(c.stats.total),3),t("p",{class:l(["text-xs text-muted-foreground",{"text-right":e(n)}])},r(c.stats.total===0?e(a)("no_data"):e(a)("total_customers")),3)]),_:1})]),_:1}),s(e(y),null,{default:o(()=>[s(e(C),{class:l(["flex flex-row items-center justify-between space-y-0 pb-2",{"flex-row-reverse":e(n)}])},{default:o(()=>[s(e(k),{class:l(["text-sm font-medium",{"text-right":e(n)}])},{default:o(()=>[m(r(e(a)("active_customers")),1)]),_:1},8,["class"]),s(e(S),{class:"h-4 w-4 text-muted-foreground"})]),_:1},8,["class"]),s(e($),null,{default:o(()=>[t("div",{class:l(["text-2xl font-bold",{"text-right":e(n)}])},r(c.stats.active),3),t("p",{class:l(["text-xs text-muted-foreground",{"text-right":e(n)}])},r(e(a)("active")),3)]),_:1})]),_:1}),s(e(y),null,{default:o(()=>[s(e(C),{class:l(["flex flex-row items-center justify-between space-y-0 pb-2",{"flex-row-reverse":e(n)}])},{default:o(()=>[s(e(k),{class:l(["text-sm font-medium",{"text-right":e(n)}])},{default:o(()=>[m(r(e(a)("new_this_month")),1)]),_:1},8,["class"]),s(e(S),{class:"h-4 w-4 text-muted-foreground"})]),_:1},8,["class"]),s(e($),null,{default:o(()=>[t("div",{class:l(["text-2xl font-bold",{"text-right":e(n)}])},r(c.stats.new_this_month),3),t("p",{class:l(["text-xs text-muted-foreground",{"text-right":e(n)}])},r(e(a)("new_this_month")),3)]),_:1})]),_:1})]),s(e(y),null,{default:o(()=>[s(e(C),null,{default:o(()=>[s(e(k),{class:l({"text-right":e(n)})},{default:o(()=>[m(r(e(a)("customers")),1)]),_:1},8,["class"]),s(e(Z),{class:l({"text-right":e(n)})},{default:o(()=>[m(r(e(a)("manage_customers")),1)]),_:1},8,["class"])]),_:1}),s(e($),null,{default:o(()=>[c.customers.data.length===0?(_(),p("div",be,[t("div",ye,[s(e(S),{class:"mx-auto h-16 w-16 text-muted-foreground/50"}),t("h3",$e,r(d.value?e(a)("no_results"):e(a)("no_data")),1),t("p",Ce,r(d.value?`${e(a)("no_results")} "${d.value}"`:e(a)("manage_customers")),1),t("div",{class:l(["mt-4 flex gap-2 justify-center",{"flex-row-reverse":e(n)}])},[d.value?(_(),w(e(v),{key:0,variant:"outline",onClick:D},{default:o(()=>[m(r(e(a)("clear_search")),1)]),_:1})):b("",!0),s(e(v),{onClick:V},{default:o(()=>[s(e(M),{class:l(["h-4 w-4",e(n)?"ml-2":"mr-2"])},null,8,["class"]),m(" "+r(e(a)("add_customer")),1)]),_:1})],2)])])):(_(),p("div",ke,[d.value?(_(),p("div",{key:0,class:l(["flex items-center justify-between p-3 bg-muted/50 rounded-md",{"flex-row-reverse":e(n)}])},[t("div",{class:l(["flex items-center gap-2",{"flex-row-reverse":e(n)}])},[s(e(L),{class:"h-4 w-4 text-muted-foreground"}),t("span",Se,r(e(a)("showing"))+" "+r(c.customers.total)+" "+r(e(a)("results"))+' "'+r(d.value)+'" ',1)],2),s(e(v),{variant:"ghost",size:"sm",onClick:D},{default:o(()=>[m(r(e(a)("clear_search")),1)]),_:1})],2)):b("",!0),t("div",De,[t("table",Pe,[t("thead",null,[t("tr",je,[t("th",Ne,r(e(a)("name")),1),t("th",Ue,r(e(a)("phone")),1),t("th",Ve,r(e(a)("drivers_license")),1),t("th",ze,r(e(a)("status")),1),t("th",Ie,r(e(a)("actions")),1)])]),t("tbody",null,[(_(!0),p(N,null,I(c.customers.data,i=>(_(),p("tr",{key:i.id,class:"border-b transition-colors hover:bg-muted/50"},[t("td",Ae,[t("div",Le,r(Q(i)),1),t("div",Me,r(i.country),1),t("div",Re,r(i.nationality),1)]),t("td",Be,[t("div",{class:l(["flex items-center gap-2 text-sm",{"flex-row-reverse":e(n)}])},[s(e(de),{class:"h-4 w-4"}),m(" "+r(i.email),1)],2),t("div",{class:l(["flex items-center gap-2 text-sm text-muted-foreground",{"flex-row-reverse":e(n)}])},[s(e(_e),{class:"h-4 w-4"}),m(" "+r(i.phone),1)],2)]),t("td",Te,[t("div",{class:l(["flex items-center gap-2 text-sm",{"flex-row-reverse":e(n)}])},[s(e(ue),{class:"h-4 w-4"}),m(" "+r(i.drivers_license_number),1)],2),t("div",{class:l(["flex items-center gap-2 text-sm text-muted-foreground",{"flex-row-reverse":e(n)}])},[s(e(me),{class:"h-4 w-4"}),m(" "+r(e(a)("license_expiry"))+": "+r(q(i.drivers_license_expiry)),1)],2)]),t("td",Ee,[t("span",{class:l(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{"bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20":i.status==="active","bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/20":i.status==="inactive"}])},r(i.status==="active"?e(a)("active"):e(a)("inactive")),3)]),t("td",Fe,[t("div",qe,[s(e(v),{size:"sm",variant:"ghost",onClick:g=>T(i)},{default:o(()=>[s(e(fe),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])])]),c.customers.last_page>1?(_(),p("div",{key:1,class:l(["flex items-center justify-between mt-6",{"flex-row-reverse":e(n)}])},[t("p",{class:l(["text-sm text-muted-foreground",{"text-right":e(n)}])}," Showing "+r(c.customers.from??0)+" to "+r(c.customers.to??0)+" of "+r(c.customers.total)+" results ",3),t("div",{class:l(["flex items-center gap-2",{"flex-row-reverse":e(n)}])},[c.customers.current_page>1?(_(),w(e(U),{key:0,href:`/customers?page=${c.customers.current_page-1}${d.value?"&search="+encodeURIComponent(d.value):""}`,class:"px-3 py-2 text-sm border rounded-md transition-colors hover:bg-muted"},{default:o(()=>f[3]||(f[3]=[m(" Previous ")])),_:1,__:[3]},8,["href"])):(_(),p("span",Qe," Previous ")),(_(!0),p(N,null,I(G(),i=>(_(),w(e(U),{key:`page-${i}`,href:`/customers?page=${i}${d.value?"&search="+encodeURIComponent(d.value):""}`,class:l(["px-3 py-2 text-sm border rounded-md transition-colors",{"bg-primary text-primary-foreground border-primary":i===c.customers.current_page,"hover:bg-muted":i!==c.customers.current_page}])},{default:o(()=>[m(r(i),1)]),_:2},1032,["href","class"]))),128)),c.customers.current_page<c.customers.last_page?(_(),w(e(U),{key:2,href:`/customers?page=${c.customers.current_page+1}${d.value?"&search="+encodeURIComponent(d.value):""}`,class:"px-3 py-2 text-sm border rounded-md transition-colors hover:bg-muted"},{default:o(()=>f[4]||(f[4]=[m(" Next ")])),_:1,__:[4]},8,["href"])):(_(),p("span",Ge," Next "))],2)],2)):b("",!0)]))]),_:1})]),_:1})])])]),_:1})],64))}});export{pt as default};
