import{y as _t,x as pt,r as S,p as T,z as C,D as yt,A as vt,b as O,o as v,w as u,a as o,d as r,u as a,S as gt,f as bt,c as D,g as k,e as f,h as V,i as R,t as N,F as q,l as z,n as xt,v as E,J as ht}from"./app-b8XJRdzs.js";import{e as Dt}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-BiWPMEjH.js";import{_ as Y}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-sqSvxu1x.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-BEMrVEMA.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-lr-bST2I.js";import{_ as j}from"./Card.vue_vue_type_script_setup_true_lang-Xmz3efc3.js";import{_ as L}from"./CardContent.vue_vue_type_script_setup_true_lang-DbWc4gCn.js";import{_ as P}from"./CardDescription.vue_vue_type_script_setup_true_lang-DZo8GV2K.js";import{_ as Z,a as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-NhLmzeXw.js";import{_ as Nt,a as wt,b as Ct,c as Vt}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DX-02_Zk.js";import{_ as $t}from"./DialogHeader.vue_vue_type_script_setup_true_lang-B0T4WOqG.js";import{_ as St}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BYB4zl1W.js";import{_ as Q}from"./AsyncCombobox.vue_vue_type_script_setup_true_lang-CkQWcyUh.js";import{_ as Ut}from"./CreateCustomerForm.vue_vue_type_script_setup_true_lang-BrvQKtwc.js";import{n as Tt,d as kt,c as It,t as K,m as st,a as ot,f as I}from"./format-Bw_hER4B.js";import{A as At}from"./arrow-left-D3PyjvCz.js";import{P as Mt}from"./plus-DWUfR-QR.js";import{D as X}from"./dollar-sign-Ba_5A1C3.js";import{U as Ft}from"./user-CnIwT-zD.js";import"./useForwardExpose-BelQI3mm.js";import"./RovingFocusGroup-BCQs797K.js";import"./check-D9HUwHVL.js";import"./Textarea.vue_vue_type_script_setup_true_lang-Dzl40Zb6.js";import"./InputError.vue_vue_type_script_setup_true_lang-QodU9sNY.js";function tt(l,n,e){const[d,c]=Tt(e==null?void 0:e.in,l,n),_=et(d,c),b=Math.abs(kt(d,c));d.setDate(d.getDate()-_*b);const x=+(et(d,c)===-_),h=_*(b-x);return h===0?0:h}function et(l,n){const e=l.getFullYear()-n.getFullYear()||l.getMonth()-n.getMonth()||l.getDate()-n.getDate()||l.getHours()-n.getHours()||l.getMinutes()-n.getMinutes()||l.getSeconds()-n.getSeconds()||l.getMilliseconds()-n.getMilliseconds();return e<0?-1:e>0?1:e}function A(l,n){const e=()=>It(n==null?void 0:n.in,NaN),c=qt(l);let _;if(c.date){const p=zt(c.date,2);_=Et(p.restDateString,p.year)}if(!_||isNaN(+_))return e();const b=+_;let x=0,h;if(c.time&&(x=Yt(c.time),isNaN(x)))return e();if(c.timezone){if(h=jt(c.timezone),isNaN(h))return e()}else{const p=new Date(b+x),$=K(0,n==null?void 0:n.in);return $.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),$.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),$}return K(b+x+h,n==null?void 0:n.in)}const M={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ht=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ot=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Rt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qt(l){const n={},e=l.split(M.dateTimeDelimiter);let d;if(e.length>2)return n;if(/:/.test(e[0])?d=e[0]:(n.date=e[0],d=e[1],M.timeZoneDelimiter.test(n.date)&&(n.date=l.split(M.timeZoneDelimiter)[0],d=l.substr(n.date.length,l.length))),d){const c=M.timezone.exec(d);c?(n.time=d.replace(c[1],""),n.timezone=c[1]):n.time=d}return n}function zt(l,n){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),d=l.match(e);if(!d)return{year:NaN,restDateString:""};const c=d[1]?parseInt(d[1]):null,_=d[2]?parseInt(d[2]):null;return{year:_===null?c:_*100,restDateString:l.slice((d[1]||d[2]).length)}}function Et(l,n){if(n===null)return new Date(NaN);const e=l.match(Ht);if(!e)return new Date(NaN);const d=!!e[4],c=U(e[1]),_=U(e[2])-1,b=U(e[3]),x=U(e[4]),h=U(e[5])-1;if(d)return Wt(n,x,h)?Lt(n,x,h):new Date(NaN);{const p=new Date(0);return!Zt(n,_,b)||!Bt(n,c)?new Date(NaN):(p.setUTCFullYear(n,_,Math.max(c,b)),p)}}function U(l){return l?parseInt(l):1}function Yt(l){const n=l.match(Ot);if(!n)return NaN;const e=W(n[1]),d=W(n[2]),c=W(n[3]);return Jt(e,d,c)?e*st+d*ot+c*1e3:NaN}function W(l){return l&&parseFloat(l.replace(",","."))||0}function jt(l){if(l==="Z")return 0;const n=l.match(Rt);if(!n)return 0;const e=n[1]==="+"?-1:1,d=parseInt(n[2]),c=n[3]&&parseInt(n[3])||0;return Gt(d,c)?e*(d*st+c*ot):NaN}function Lt(l,n,e){const d=new Date(0);d.setUTCFullYear(l,0,4);const c=d.getUTCDay()||7,_=(n-1)*7+e+1-c;return d.setUTCDate(d.getUTCDate()+_),d}const Pt=[31,null,31,30,31,30,31,31,30,31,30,31];function at(l){return l%400===0||l%4===0&&l%100!==0}function Zt(l,n,e){return n>=0&&n<=11&&e>=1&&e<=(Pt[n]||(at(l)?29:28))}function Bt(l,n){return n>=1&&n<=(at(l)?366:365)}function Wt(l,n,e){return n>=1&&n<=53&&e>=0&&e<=6}function Jt(l,n,e){return l===24?n===0&&e===0:e>=0&&e<60&&n>=0&&n<60&&l>=0&&l<25}function Gt(l,n){return n>=0&&n<=59}const Qt={class:"container mx-auto p-6 max-w-7xl"},Kt={class:"flex items-center justify-between mb-8"},Xt={class:"flex items-center gap-4"},te={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ee={class:"space-y-2"},se={class:"pt-4 border-t"},oe={class:"flex items-center justify-between"},ae={class:"space-y-2"},ne={class:"space-y-2"},ie={class:"grid grid-cols-2 gap-4"},re={class:"space-y-2"},le={class:"space-y-2"},de={class:"relative"},ue={key:0,class:"mt-6 space-y-4"},ce={class:"flex items-center gap-2"},me={class:"grid grid-cols-2 gap-4"},fe={class:"space-y-1"},_e={class:"text-sm font-medium"},pe={class:"space-y-1"},ye={class:"text-sm font-medium"},ve={class:"space-y-1"},ge={class:"text-sm font-medium"},be={class:"space-y-1"},xe={class:"text-sm font-medium"},he={class:"space-y-1"},De={class:"text-sm font-medium"},Ne={class:"space-y-4"},we={class:"space-y-2"},Ce={key:0,class:"space-y-4"},Ve={class:"space-y-2"},$e=["value"],Se={class:"space-y-2"},Ue={class:"grid grid-cols-2 gap-4"},Te={class:"space-y-2"},ke={class:"space-y-2"},Ie={class:"space-y-2"},Ae={class:"w-full mt-0"},Me={class:"bg-white rounded-lg shadow border"},Fe={class:"w-full text-sm"},He={class:"px-4 py-2"},Oe=["onUpdate:modelValue","readonly","required"],Re={class:"px-4 py-2 text-center"},qe=["onUpdate:modelValue"],ze={class:"px-4 py-2 text-center"},Ee=["onUpdate:modelValue"],Ye={class:"px-4 py-2 text-right font-semibold"},je={class:"px-2 py-2 text-center"},Le=["onClick"],Pe={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ze={class:"space-y-2"},Be={class:"relative"},We={class:"space-y-2"},Je={class:"space-y-2"},Ge={class:"input w-full bg-gray-50"},Qe={class:"flex justify-end mt-8"},Ke={key:0,class:"text-red-600 mt-4"},ws=_t({__name:"Create",props:{contracts:{},nextInvoiceNumber:{}},setup(l){var G;const n=l,e=pt({invoice_date:I(new Date,"yyyy-MM-dd'T'HH:mm"),due_date:I(new Date,"yyyy-MM-dd'T'HH:mm"),status:"unpaid",currency:"AED",total_days:0,start_datetime:I(new Date,"yyyy-MM-dd'T'HH:mm"),end_datetime:I(new Date,"yyyy-MM-dd'T'HH:mm"),vehicle_id:"",customer_id:"",contract_id:"",sub_total:0,total_discount:0,total_amount:0,type:"Rental",items:[{description:"",amount:0,discount:0}]}),d=S(null),c=S(null),_=S(!1),b=S(null),x=T(()=>e.items.reduce((i,t)=>i+(Number(t.amount||0)-Number(t.discount||0)),0));T(()=>x.value-Number(e.total_amount||0));const h=T(()=>{if(!e.contract_id)return null;const i=n.contracts.find(t=>t.id===e.contract_id);return i&&i.total_amount?Number(i.total_amount):null});C(()=>e.items,i=>{const t=i;e.sub_total=t.reduce((s,m)=>s+(Number(m.amount)||0),0),e.total_discount=t.reduce((s,m)=>s+(Number(m.discount)||0),0),e.total_amount=e.sub_total-e.total_discount},{deep:!0}),C(()=>e.status,i=>{i==="paid"&&(e.total_amount=0)}),C([()=>e.start_datetime,()=>e.end_datetime],([i,t])=>{if(!e.contract_id&&i&&t){const s=A(i),m=A(t),y=tt(m,s);e.total_days=Math.max(0,y+1)}}),C(()=>e.vehicle_id,i=>{if(!i){const t=e.items,s=t.findIndex(m=>m.isVehicle);s!==-1&&t.splice(s,1)}});function p(i){return i?new Date(i).toISOString().slice(0,16):""}C(()=>e.contract_id,i=>{const t=e.items;if(i){const s=n.contracts.find(m=>m.id===i);if(s){s.start_date&&(e.start_datetime=p(s.start_date)),s.end_date&&(e.end_datetime=p(s.end_date)),s.vehicle_id&&(e.vehicle_id=s.vehicle_id),s.total_days&&(e.total_days=s.total_days),s.customer_id&&(e.customer_id=s.customer_id);const m=s.vehicle?`${s.vehicle.year} ${s.vehicle.make} ${s.vehicle.model} - ${s.vehicle.plate_number}`:s.vehicle_id,y=s.total_amount?Number(s.total_amount):s.daily_rate&&s.total_days?Number(s.daily_rate)*Number(s.total_days):0,H=t.findIndex(ft=>ft.isVehicle);H!==-1?(t[H].description=m,t[H].amount=y):t.unshift({description:m,amount:y,discount:0,isVehicle:!0})}}else{const s=t.findIndex(m=>m.isVehicle);s!==-1&&t.splice(s,1)}},{immediate:!0}),C(()=>n.contracts,i=>{if(e.contract_id){const t=i.find(s=>s.id===e.contract_id);t&&(t.start_date&&(e.start_datetime=p(t.start_date)),t.end_date&&(e.end_datetime=p(t.end_date)),t.total_days&&(e.total_days=t.total_days),t.customer_id&&(e.customer_id=t.customer_id))}},{immediate:!0,deep:!0});const $=()=>{const i=e.items;e.sub_total=i.reduce((t,s)=>t+(Number(s.amount)||0),0),e.total_discount=i.reduce((t,s)=>t+(Number(s.discount)||0),0),e.total_amount=e.sub_total-e.total_discount,e.items=i.map(t=>({description:t.description||"",amount:Number(t.amount)||0,discount:Number(t.discount)||0})),e.post(route("invoices.store"),{onSuccess:()=>{},onError:t=>{console.error("Form submission errors:",t)}})};S([{id:"1",name:"Sales"},{id:"2",name:"Services"}]);function nt(){e.items.push({description:"",amount:0,discount:0})}function it(i){const t=e.items;t[i]&&t[i].isVehicle||t.splice(i,1)}function J(){if(!e.contract_id&&e.start_datetime&&e.end_datetime){const i=A(e.start_datetime),t=A(e.end_datetime),s=tt(t,i);e.total_days=Math.max(0,s+1)}}function rt(){e.items.push({description:"Security Deposit",amount:0,discount:0})}const F=(G=yt().url.split("contract_id=")[1])==null?void 0:G.split("&")[0];F&&n.contracts.some(i=>i.id===F)&&(e.contract_id=F),vt(()=>{if(e.contract_id){const i=n.contracts.find(t=>t.id===e.contract_id);i&&(i.start_date&&(e.start_datetime=p(i.start_date)),i.end_date&&(e.end_datetime=p(i.end_date)),i.total_days&&(e.total_days=i.total_days),i.customer_id&&(e.customer_id=i.customer_id))}});const lt=i=>{d.value=i},dt=i=>{ht.post("/customers",i.data(),{onSuccess:t=>{var m,y;console.log("Customer creation success, page:",t);const s=t.props.newCustomer||((m=t.props.flash)==null?void 0:m.newCustomer)||((y=t.props.flash)==null?void 0:y.customer)||t.props.customer||null;console.log("Found customer data:",s),s?(e.customer_id=s.id,d.value=s,b.value?(console.log("Calling selectOption with:",s),b.value.selectOption(s)):console.log("Combobox ref not available")):console.log("No customer data found in response"),_.value=!1},onError:t=>{console.log("Validation errors:",t),Object.keys(t).forEach(s=>{s in i.errors&&i.setError(s,t[s])})},headers:{Accept:"application/json"}})},ut=()=>{_.value=!1},ct=i=>{c.value=i;const t=e.items,s=t.findIndex(m=>m.isVehicle);s!==-1?t[s].description=i.label:t.unshift({description:i.label,amount:0,discount:0,isVehicle:!0})},mt=T(()=>{if(!e.contract_id)return"";const i=n.contracts.find(t=>t.id===e.contract_id);return i?i.vehicle?`${i.vehicle.year} ${i.vehicle.make} ${i.vehicle.model} - ${i.vehicle.plate_number}`:i.vehicle_id||"":""});return(i,t)=>(v(),O(Dt,null,{default:u(()=>[o("div",Qt,[o("div",Kt,[o("div",Xt,[r(a(Y),{variant:"ghost",size:"icon","as-child":"",class:"hover:bg-gray-100"},{default:u(()=>[r(a(gt),{href:i.route("invoices")},{default:u(()=>[r(a(At),{class:"h-5 w-5"})]),_:1},8,["href"])]),_:1}),t[12]||(t[12]=o("div",null,[o("h1",{class:"text-2xl font-semibold tracking-tight"},"Create New Invoice"),o("p",{class:"text-sm text-gray-500 mt-1"},"Fill in the details below to create a new invoice")],-1))])]),o("form",{id:"invoice-form",onSubmit:bt($,["prevent"]),class:"space-y-8"},[o("div",te,[r(a(j),{class:"border-none shadow-md"},{default:u(()=>[r(a(Z),{class:"pb-4"},{default:u(()=>[r(a(B),{class:"text-lg font-medium"},{default:u(()=>t[13]||(t[13]=[f("Basic Information")])),_:1,__:[13]}),r(a(P),null,{default:u(()=>t[14]||(t[14]=[f("Enter the basic details of the invoice")])),_:1,__:[14]})]),_:1}),r(a(L),{class:"space-y-6"},{default:u(()=>[o("div",ee,[r(Q,{ref_key:"customerComboboxRef",ref:b,modelValue:a(e).customer_id,"onUpdate:modelValue":t[0]||(t[0]=s=>a(e).customer_id=s),label:"Customer",placeholder:"Search customers...","search-url":"/api/customers/search",required:!0,onOptionSelected:lt},null,8,["modelValue"]),o("div",se,[o("div",oe,[t[18]||(t[18]=o("p",{class:"text-sm text-gray-500"}," Need to add a new customer? ",-1)),r(a(Nt),{open:_.value,"onUpdate:open":t[1]||(t[1]=s=>_.value=s)},{default:u(()=>[r(a(St),{"as-child":""},{default:u(()=>[r(a(Y),{type:"button",variant:"outline",size:"sm"},{default:u(()=>[r(a(Mt),{class:"w-4 h-4 mr-2"}),t[15]||(t[15]=f(" Create Customer "))]),_:1,__:[15]})]),_:1}),r(a(wt),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:u(()=>[r(a($t),null,{default:u(()=>[r(a(Ct),null,{default:u(()=>t[16]||(t[16]=[f("Create New Customer")])),_:1,__:[16]}),r(a(Vt),null,{default:u(()=>t[17]||(t[17]=[f(" Add a new customer to your database. All fields marked with * are required. ")])),_:1,__:[17]})]),_:1}),r(Ut,{onSubmit:dt,onCancel:ut})]),_:1})]),_:1},8,["open"])])])]),o("div",ae,[r(a(g),{for:"invoice_date",class:"text-sm font-medium"},{default:u(()=>t[19]||(t[19]=[f("Invoice Date")])),_:1,__:[19]}),r(a(w),{type:"datetime-local",id:"invoice_date",modelValue:a(e).invoice_date,"onUpdate:modelValue":t[2]||(t[2]=s=>a(e).invoice_date=s),required:"",class:"h-10"},null,8,["modelValue"])]),o("div",ne,[r(a(g),{for:"due_date",class:"text-sm font-medium"},{default:u(()=>t[20]||(t[20]=[f("Due Date")])),_:1,__:[20]}),r(a(w),{type:"datetime-local",id:"due_date",modelValue:a(e).due_date,"onUpdate:modelValue":t[3]||(t[3]=s=>a(e).due_date=s),required:"",class:"h-10"},null,8,["modelValue"])]),o("div",ie,[o("div",re,[r(a(g),{for:"status",class:"text-sm font-medium"},{default:u(()=>t[21]||(t[21]=[f("Status")])),_:1,__:[21]}),V(o("select",{id:"status","onUpdate:modelValue":t[4]||(t[4]=s=>a(e).status=s),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},t[22]||(t[22]=[o("option",{value:"unpaid"},"Unpaid",-1),o("option",{value:"paid"},"Paid",-1),o("option",{value:"partial_paid"},"Partial Paid",-1)]),512),[[R,a(e).status]])]),o("div",le,[r(a(g),{for:"currency",class:"text-sm font-medium"},{default:u(()=>t[23]||(t[23]=[f("Currency")])),_:1,__:[23]}),o("div",de,[r(a(X),{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),r(a(w),{id:"currency",modelValue:a(e).currency,"onUpdate:modelValue":t[5]||(t[5]=s=>a(e).currency=s),required:"",class:"h-10 pl-10"},null,8,["modelValue"])])])]),d.value?(v(),D("div",ue,[o("div",ce,[r(a(Ft),{class:"h-5 w-5 text-gray-400"}),t[24]||(t[24]=o("h3",{class:"text-sm font-medium"},"Customer Information",-1))]),o("div",me,[o("div",fe,[t[25]||(t[25]=o("p",{class:"text-sm text-gray-500"},"Name",-1)),o("p",_e,N(d.value.name),1)]),o("div",pe,[t[26]||(t[26]=o("p",{class:"text-sm text-gray-500"},"Email",-1)),o("p",ye,N(d.value.email),1)]),o("div",ve,[t[27]||(t[27]=o("p",{class:"text-sm text-gray-500"},"Phone",-1)),o("p",ge,N(d.value.phone||"N/A"),1)]),o("div",be,[t[28]||(t[28]=o("p",{class:"text-sm text-gray-500"},"License Number",-1)),o("p",xe,N(d.value.drivers_license_number||"N/A"),1)])]),o("div",he,[t[29]||(t[29]=o("p",{class:"text-sm text-gray-500"},"Address",-1)),o("p",De,N(d.value.address?`${d.value.address}, ${d.value.city}, ${d.value.country}`:"N/A"),1)])])):k("",!0)]),_:1})]),_:1}),r(a(j),{class:"border-none shadow-md"},{default:u(()=>[r(a(Z),{class:"pb-4"},{default:u(()=>[r(a(B),{class:"text-lg font-medium"},{default:u(()=>t[30]||(t[30]=[f("Type")])),_:1,__:[30]}),r(a(P),null,{default:u(()=>t[31]||(t[31]=[f("Select invoice type and related details")])),_:1,__:[31]})]),_:1}),r(a(L),null,{default:u(()=>[o("div",Ne,[o("div",we,[r(a(g),{for:"type",class:"text-sm font-medium"},{default:u(()=>t[32]||(t[32]=[f("Type")])),_:1,__:[32]}),V(o("select",{id:"type","onUpdate:modelValue":t[6]||(t[6]=s=>a(e).type=s),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},t[33]||(t[33]=[o("option",{value:"Rental"},"Rental",-1),o("option",{value:"Service"},"Service",-1),o("option",{value:"Fee"},"Fee",-1),o("option",{value:"General"},"General",-1)]),512),[[R,a(e).type]])]),a(e).type==="Rental"?(v(),D("div",Ce,[o("div",Ve,[r(a(g),{for:"contract_id",class:"text-sm font-medium"},{default:u(()=>t[34]||(t[34]=[f("Contract")])),_:1,__:[34]}),V(o("select",{id:"contract_id","onUpdate:modelValue":t[7]||(t[7]=s=>a(e).contract_id=s),class:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[t[35]||(t[35]=o("option",{value:""},"Select a contract",-1)),(v(!0),D(q,null,z(n.contracts,s=>(v(),D("option",{key:s.id,value:s.id},N(s.contract_number),9,$e))),128))],512),[[R,a(e).contract_id]])]),o("div",Se,[r(a(g),{for:"vehicle_id",class:"text-sm font-medium"},{default:u(()=>t[36]||(t[36]=[f("Vehicle")])),_:1,__:[36]}),a(e).contract_id?(v(),O(a(w),{key:0,id:"vehicle_id",value:mt.value,readonly:"",class:"h-10 bg-gray-100 cursor-not-allowed"},null,8,["value"])):(v(),O(Q,{key:1,modelValue:a(e).vehicle_id,"onUpdate:modelValue":t[8]||(t[8]=s=>a(e).vehicle_id=s),placeholder:"Search vehicles...","search-url":"/api/vehicles/search",required:!0,onOptionSelected:ct},null,8,["modelValue"]))]),o("div",Ue,[o("div",Te,[r(a(g),{for:"start_datetime",class:"text-sm font-medium"},{default:u(()=>t[37]||(t[37]=[f("Start Date & Time")])),_:1,__:[37]}),r(a(w),{type:"datetime-local",id:"start_datetime",modelValue:a(e).start_datetime,"onUpdate:modelValue":t[9]||(t[9]=s=>a(e).start_datetime=s),required:"",class:"h-10",onChange:J},null,8,["modelValue"])]),o("div",ke,[r(a(g),{for:"end_datetime",class:"text-sm font-medium"},{default:u(()=>t[38]||(t[38]=[f("End Date & Time")])),_:1,__:[38]}),r(a(w),{type:"datetime-local",id:"end_datetime",modelValue:a(e).end_datetime,"onUpdate:modelValue":t[10]||(t[10]=s=>a(e).end_datetime=s),required:"",class:"h-10",onChange:J},null,8,["modelValue"])])]),o("div",Ie,[r(a(g),{for:"total_days",class:"text-sm font-medium"},{default:u(()=>t[39]||(t[39]=[f("Total Days")])),_:1,__:[39]}),r(a(w),{type:"number",id:"total_days",modelValue:a(e).total_days,"onUpdate:modelValue":t[11]||(t[11]=s=>a(e).total_days=s),required:"",class:"h-10",readonly:!!a(e).contract_id},null,8,["modelValue","readonly"])])])):k("",!0)])]),_:1})]),_:1})]),o("div",Ae,[o("div",Me,[o("table",Fe,[t[40]||(t[40]=o("thead",{class:"bg-gray-50 border-b"},[o("tr",null,[o("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},[f("Description"),o("span",{class:"text-red-500"},"*")]),o("th",{class:"px-4 py-3 text-center font-semibold text-gray-700"},[f("Amount"),o("span",{class:"text-red-500"},"*")]),o("th",{class:"px-4 py-3 text-center font-semibold text-gray-700"},"Discount"),o("th",{class:"px-4 py-3 text-right font-semibold text-gray-700"},"Total"),o("th",{class:"px-4 py-3"})])],-1)),o("tbody",null,[(v(!0),D(q,null,z(a(e).items,(s,m)=>(v(),D("tr",{key:m,class:"border-b hover:bg-gray-50"},[o("td",He,[V(o("input",{"onUpdate:modelValue":y=>s.description=y,readonly:s.isVehicle,class:xt(["w-full border rounded px-2 py-1 focus:ring-2 focus:ring-blue-200 focus:border-blue-400 transition",{"bg-gray-100 cursor-not-allowed":s.isVehicle}]),placeholder:"Description",required:m===0},null,10,Oe),[[E,s.description]])]),o("td",Re,[V(o("input",{"onUpdate:modelValue":y=>s.amount=y,type:"number",min:"0",step:"0.01",class:"w-28 border rounded px-2 py-1 text-center focus:ring-2 focus:ring-blue-200 focus:border-blue-400 transition",required:""},null,8,qe),[[E,s.amount,void 0,{number:!0}]])]),o("td",ze,[V(o("input",{"onUpdate:modelValue":y=>s.discount=y,type:"number",min:"0",step:"0.01",class:"w-24 border rounded px-2 py-1 text-center focus:ring-2 focus:ring-blue-200 focus:border-blue-400 transition",placeholder:"0.00"},null,8,Ee),[[E,s.discount,void 0,{number:!0}]])]),o("td",Ye,N((Number(s.amount)-Number(s.discount)).toFixed(2)),1),o("td",je,[s.isVehicle?k("",!0):(v(),D("button",{key:0,type:"button",onClick:y=>it(m),class:"text-red-500 hover:text-red-700 font-bold text-lg",title:"Remove"}," × ",8,Le))])]))),128))])]),o("div",{class:"px-4 py-3 bg-gray-50 rounded-b-lg flex justify-between items-center"},[o("div",{class:"flex gap-4"},[o("button",{type:"button",class:"text-blue-600 hover:underline font-medium",onClick:nt}," + Item "),o("button",{type:"button",class:"text-green-600 hover:underline font-medium",onClick:rt}," + Security Deposit ")])])])]),r(a(j),{class:"border-none shadow-md lg:col-span-2"},{default:u(()=>[r(a(Z),{class:"pb-4"},{default:u(()=>[r(a(B),{class:"text-lg font-medium"},{default:u(()=>t[41]||(t[41]=[f("Financial Details")])),_:1,__:[41]}),r(a(P),null,{default:u(()=>t[42]||(t[42]=[f("Enter the payment and amount information")])),_:1,__:[42]})]),_:1}),r(a(L),null,{default:u(()=>[o("div",Pe,[o("div",Ze,[r(a(g),{for:"invoice_amount",class:"text-sm font-medium"},{default:u(()=>t[43]||(t[43]=[f("Invoice Amount")])),_:1,__:[43]}),o("div",Be,[r(a(X),{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),r(a(w),{id:"invoice_amount",value:h.value!==null?Number(h.value).toFixed(2):Number(x.value).toFixed(2),readonly:"",class:"h-10 pl-10 bg-gray-100 cursor-not-allowed"},null,8,["value"])])]),o("div",We,[r(a(g),{class:"block text-sm font-medium mb-1"},{default:u(()=>t[44]||(t[44]=[f("Paid Amount")])),_:1,__:[44]}),t[45]||(t[45]=o("div",{class:"input w-full bg-gray-50"},"0",-1))]),o("div",Je,[r(a(g),{class:"block text-sm font-medium mb-1"},{default:u(()=>t[46]||(t[46]=[f("Remaining Amount")])),_:1,__:[46]}),o("div",Ge,N(a(e).total_amount),1)])])]),_:1})]),_:1}),o("div",Qe,[r(a(Y),{type:"submit",form:"invoice-form",disabled:a(e).processing},{default:u(()=>t[47]||(t[47]=[f(" Create ")])),_:1,__:[47]},8,["disabled"])]),i.$page.props.errors&&Object.keys(i.$page.props.errors).length?(v(),D("div",Ke,[(v(!0),D(q,null,z(i.$page.props.errors,(s,m)=>(v(),D("div",{key:m},N(s),1))),128))])):k("",!0)],32)])]),_:1}))}});export{ws as default};
